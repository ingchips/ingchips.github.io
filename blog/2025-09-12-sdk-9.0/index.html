<!doctype html>
<html lang="en">
    <head>

        <title>SDK 9.0 更新说明 - INGCHIPS</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="总结 SDK 9.0 新功能。"/>
        <link rel="stylesheet" href="/assets/css/main.css">
        <link rel="icon" href="/favicon.ico" type="image/x-icon" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
        <style>
            #ai-button {
            position: fixed;
            display: block;
            bottom: 30px;
            right: 30px;
            background: url('/docs/getting-started/ai_assistant/robot.png') no-repeat center center;
            background-size: contain;
            color: white;
            border: none;
            border-radius: 0px;
            width: 80px;
            height: 80px;
            font-size: 24px;
            font-style: italic;
            cursor: pointer;
            z-index: 1000;
            flex-shrink: 0;
            box-sizing: border-box;
            padding: 0;
            color: rgba(0, 0, 0, 0);
          }

          #ai-button:hover {
            width: 400px;
            height: 400px;
            background: url('/docs/getting-started/ai_assistant/ima_kb.png') no-repeat center center;
            background-size: contain;
          }
        </style>
    </head>
    <body
        <div id="page" class="site">
  <header id="masthead" class="site-header outer">

  <div class="inner">
    <div class="site-header-inside">
      <div class="site-branding">
        
        
        <p class="site-logo"><a href="/"><img src="/images/logo_en.jpg" alt="INGCHIPS" /></a></p>
        
      </div><!-- .site-branding -->

      <div id="box">
        <input id="in_search" type="search" name="search" placeholder="搜索：输入并回车">
      </div>

      <script>
        let search_input = document.getElementById('in_search');
        if (search_input) {
          search_input.addEventListener("keypress", function(event) {
          if (event.key === "Enter") {
            window.open('https://www.bing.com/search?q=' + encodeURIComponent(search_input.value) + '%20site%3A' + window.location.hostname);
            event.preventDefault();
            }
          });
        }
      </script>

      
      
      <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Open Menu</span><span class="icon-close" aria-hidden="true"></span></button>
          <ul class="menu">
            
            <li class="menu-item">

              
<a class="" href="/">
  
  Home
  
</a>

              
            </li>
            
            <li class="menu-item">

              
<a class="" href="/docs/products">
  
  产品
  
</a>

              
            </li>
            
            <li class="menu-item">

              
<a class="" href="/docs/sdk">
  
  SDK
  
</a>

              
            </li>
            
            <li class="menu-item">

              
<a class="" href="/docs/">
  
  文档
  
</a>

              
            </li>
            
            <li class="menu-item has-children">

              
<a class="" href="/docs/sdk/apps/#web-apps">
  
  Web 工具
  
</a>

              

                <ul class="submenu">
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/callgraph">
  
  Callgraph (调用图)
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/ing918_ota/index.html">
  
  FOTA
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/ing918_ota/index_cn.html">
  
  FOTA (中文版)
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/powerprofiler/">
  
  Online Power Profiler
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/air_trace/">
  
  Trace Logger
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/assertion_tool/index.html">
  
  Assertion Tool
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/assertion_tool/index_cn.html">
  
  Assertion Tool (中文版)
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/platform_bin/index.html">
  
  Platform Binary Identifier
  
</a>

  </li>
  
  <li class="menu-item">
    
    
<a class="" href="/web_apps/conn_test/index.html">
  
  Connection Stress Test
  
</a>

  </li>
  
</ul>

              
            </li>
            
            <li class="menu-item">

              
<a class="" href="/blog/">
  
  Blog
  
</a>

              
            </li>
            
            <li class="menu-item menu-button">

              
<a class="button" href="https://github.com/ingchips">
  
  GitHub
  
</a>

              
            </li>
            
          </ul>
        </div><!-- .site-nav-inside -->
      </nav><!-- .site-navigation -->
      <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Close Menu</span><span class="icon-menu" aria-hidden="true"></span></button>
      
    </div><!-- .site-header-inside -->
  </div><!-- .inner -->
</header><!-- .site-header -->

  <main id="content" class="site-content">
    <div class="inner outer">
  <div class="docs-content">
    <article class="post post-full">
      <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
              inlineMath: [ ['$','$'], ["\\(","\\)"] ],
              displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
          }
        });
      </script>
      <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <header class="post-header has-gradient outer">
        
        
        <div class="inner-sm">
          <div class="post-meta">
            <time class="published" datetime="2025-09-12 00:00">September 12, 2025</time>
          </div>
          <h1 class="post-title">SDK 9.0 更新说明</h1>
          
          
        </div>
      </header>
      <div class="inner-md outer">
        <div class="post-content">
          <h2 id="highlights"><span style="background:yellow">Highlights:</span></h2>

<ul>
  <li>支持 ING20xx 系列（软件包、外设驱动、工具、示例）</li>
  <li>支持 EATT (目前为“预览”：仅限 <em>exp</em>, <em>noos_exp</em> 软件包, API 可能修改)</li>
</ul>

<div class="important">
<strong>注意：</strong>对 ING20xx 系列的支持目前为“预览”。注意事项：
<ul>
<li>ROM 内的协议栈版本与 v8.4.22 相同。</li>
<li>省电功能仍在优化中。</li>
<li>对于使用 ROM 的项目，axf_tool 暂不支持基于 dump 的各项分析。</li>
</ul></div>

<h2 id="v904">v9.0.4</h2>

<h3 id="1-软件包">1. 软件包</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] 低功耗时 <code class="language-plaintext highlighter-rouge">platform_create_us_timer</code> / <code class="language-plaintext highlighter-rouge">platform_create_us_timer2</code> 不正常</p>

    <p>启用低功耗，且无蓝牙任务时，<code class="language-plaintext highlighter-rouge">platform_create_us_timer</code> / <code class="language-plaintext highlighter-rouge">platform_create_us_timer2</code> 功能不正常。
  现已修正。</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] 单次睡眠支持更长的睡眠时间</p>

    <p>旧版本单次睡眠最长时间为 0xFFFFFFFF $\mu s$，约合 1.2 小时。现在单次睡眠最长时间约为 0xFFFFFFFF 个实时时钟周期。
  设实时时钟频率为 32768 Hz，折合约 36.4 小时。</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] <code class="language-plaintext highlighter-rouge">slave_latency</code> 的处理</p>

    <p>当 <code class="language-plaintext highlighter-rouge">slave_latency</code> &gt; 0 时：在旧版本里，每 <code class="language-plaintext highlighter-rouge">slave_latency</code> 个连接事件接收一次；新版本里改为每 <code class="language-plaintext highlighter-rouge">slave_latency + 1</code> 个连接事件接收一次。</p>

    <p>蓝牙规范 5.2 版本或更低版本中，存在每 <code class="language-plaintext highlighter-rouge">slave_latency</code> 个连接事件接收一次和每 <code class="language-plaintext highlighter-rouge">slave_latency + 1</code> 个连接事件接收一次两种说法。
  从 5.3 版本开始，明确为每 <code class="language-plaintext highlighter-rouge">slave_latency + 1</code> 个连接事件接收一次。新版本行为与此一致。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] Host: <code class="language-plaintext highlighter-rouge">..request_can_send_now</code> 可能递归调用导致栈溢出</p>

    <p>问题分析：</p>

    <p><code class="language-plaintext highlighter-rouge">..request_can_send_now()</code> 的伪代码如下：</p>

    <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="p">..</span><span class="n">request_can_send_now</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">can_send_now</span><span class="p">())</span> <span class="p">{</span>
          <span class="n">emit_event</span><span class="p">();</span>
          <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="p">....</span>
  <span class="p">}</span>
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">can_send_now()</code> 通过比较启动时 Controller 上报的包数目（N1）和当前 Controller 中待发送包数目判断是否可以继续填充数据。
  当 Controller 的内存以其它占用时（如通过 <code class="language-plaintext highlighter-rouge">ll_malloc</code> 分配内存），Controller 实际所能缓存的数据将低于 N1，此时 <code class="language-plaintext highlighter-rouge">can_send_now()</code> 会误判为 <code class="language-plaintext highlighter-rouge">true</code>，
  导致发送 <code class="language-plaintext highlighter-rouge">.._CAN_SEND_NOW</code> 事件。app 的事件回调中一旦再次调用 <code class="language-plaintext highlighter-rouge">..request_can_send_now()</code>，就会多层嵌套，栈溢出。</p>

    <p>新版本里的 <code class="language-plaintext highlighter-rouge">..request_can_send_now()</code> 可以主动防止出现递归。</p>

    <p>对于不方便升级 SDK 的大数据吞吐量的项目，建议：</p>

    <ul>
      <li>防止嵌套调用 <code class="language-plaintext highlighter-rouge">..request_can_send_now()</code>；或者</li>
      <li>既不调用 <code class="language-plaintext highlighter-rouge">..request_can_send_now()</code>，也不响应 <code class="language-plaintext highlighter-rouge">.._CAN_SEND_NOW</code> 事件，而是响应 <code class="language-plaintext highlighter-rouge">HCI_EVENT_NUMBER_OF_COMPLETED_PACKETS</code> 事件，在这个事件里尝试发送数据。</li>
    </ul>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 ROM: 模拟 2 个广播集</p>

    <p>存在以下限制：</p>

    <ul>
      <li>仅支持 Legacy 广播；</li>
      <li>广播间隔与配置的参数有所不同：设第 1 个广播的广播间隔为 T1，第 2 个广播的广播间隔为 T2，记 K = max(T2 / T1, 1)，实际的发送时序为以 T1 为间隔每发送 K 次广播 1，发送 1 次广播 2。</li>
    </ul>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20：低功耗稳定性</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 默认参数</p>

    <p>修改前后的默认时钟参数：</p>

    <p><img src="../img/sdk_v904_clock_change.png" alt="" /></p>

    <p>新版本中，内部 Flash 不再使能连续读取。</p>
  </li>
</ul>

<h3 id="2-库函数">2. 库函数</h3>

<ul>
  <li>
    <p>[<strong>更新</strong>] ING20 Eflash：自动兼容连续读取、非连续读取；自动清空 Cache</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 PWM：IR mode 2 发送异常</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 SYCTRL: TIMER 时钟读取接口</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 SADC：ADC-DMA 异常</p>

    <p>为 DMA 设置 SADC 默认比特宽度。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 I2S：FIFO 深度</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 PINCTRL：<code class="language-plaintext highlighter-rouge">PINCTRL_SetPadMux</code> 输入 <code class="language-plaintext highlighter-rouge">IO_NOT_A_PIN</code> 时逻辑错误</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 QDEC：补充中断配置等接口</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 SPI: 当载荷长度大于 512 字节时传输出错</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 SYCTRL: <code class="language-plaintext highlighter-rouge">SYSCTRL_GetFlashClk</code></p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 QDEC：偶而出现的寄存器写入错误</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 GPIO：去除 GPIO 边沿唤醒功能</p>

    <p>请使用电平唤醒。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 WDT：启用低功耗时 <code class="language-plaintext highlighter-rouge">TMR_WatchDogDisable</code> 功能异常</p>
  </li>
</ul>

<h3 id="3-示例">3. 示例</h3>

<ul>
  <li>[<strong>更新</strong>] <em>HID Keyboard</em>: <code class="language-plaintext highlighter-rouge">kv_impl.c</code> 适配 ING20</li>
</ul>

<h3 id="4-工具">4. 工具</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] Wizard：不使用 Cube 时可能生成错误代码</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Wizard：新建项目时，可选择中断服务函数的注册方式</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] <code class="language-plaintext highlighter-rouge">ingchips_pack_addon.py</code></p>
  </li>
</ul>

<h2 id="v903">v9.0.3</h2>

<h3 id="1-软件包-1">1. 软件包</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] <code class="language-plaintext highlighter-rouge">LL_FLAG_LEGACY_ONLY_SCANNING</code> 无效</p>

    <p>此问题由 v8.5.4 优化 Controller 调度时引入。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20：<code class="language-plaintext highlighter-rouge">platform_shutdown</code> 功能异常</p>
  </li>
</ul>

<h3 id="2-库函数-1">2. 库函数</h3>

<ul>
  <li>
    <p>[<strong>新增</strong>] USB CDC ACM 模块</p>

    <p>使用此模块可以方便地为应用加入虚拟串口功能。</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 时钟相关: 增加 FastPre 时钟控制接口 <code class="language-plaintext highlighter-rouge">SYSCTRL_SetFastPreDiv</code>, <code class="language-plaintext highlighter-rouge">SYSCTRL_GetFastPreCLK</code></p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 时钟相关: <code class="language-plaintext highlighter-rouge">SYSCTRL_GetFlashClk</code></p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 ASDM：<code class="language-plaintext highlighter-rouge">ASDM_ClrOverflowError</code></p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 ADC：<code class="language-plaintext highlighter-rouge">ADC_HardwareCalibration</code>, <code class="language-plaintext highlighter-rouge">ADC_GetDataChannel</code></p>
  </li>
</ul>

<h3 id="3-示例-1">3. 示例</h3>

<ul>
  <li>[<strong>更新</strong>] <em>Voice Remote Control</em>: ING20 演示 ASDM + DMA 实现模拟 MIC 声音采集</li>
</ul>

<h3 id="4-工具-1">4. 工具</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] GUI Downloader：使用 ING-DAPLink 时可能无法启动应用</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Cube 支持配置 QDEC Step 时钟</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Wizard：新建项目时可选择使用 USB CDC ACM 输出 <code class="language-plaintext highlighter-rouge">printf</code> 信息</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Wizard：新建项目时调试器默认 CMSIS-DAP</p>
  </li>
</ul>

<h2 id="v902">v9.0.2</h2>

<h3 id="1-软件包-2">1. 软件包</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] ING20：多连接时内存不足</p>

    <p>ING20 <em>mass_conn</em> 软件包支持最多 5 连接，<em>mini</em> 支持 1 个连接；其它软件包支持最多 3 连接（旧版本支持 2 连接）。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20：<em>noos</em> 软件包无法使用</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 ROM：开启低功耗后，<code class="language-plaintext highlighter-rouge">platform_set_timer</code> 唤醒时间错误</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] Platform 启动时 Trace 输出芯片系列总是为 ING918</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Controller：改善 Master 角色对低吞吐率设备的兼容性</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] <code class="language-plaintext highlighter-rouge">att_server_init</code></p>

    <p>旧版本 <code class="language-plaintext highlighter-rouge">att_server_init</code> 用于初始化 ATT Server，并设置回调。新版本仅用来设置回调，ATT Server 初始化由 platform 完成。
  旧版 <code class="language-plaintext highlighter-rouge">att_server_init</code>必须在 <code class="language-plaintext highlighter-rouge">PLATFORM_CB_EVT_PROFILE_INIT</code> 事件中调用，并且只能调用一次。</p>

    <p>新版 SDK：</p>

    <ul>
      <li>如果应用不涉及 ATT 特征的写入、或者动态数据的读取，那么可以不调用 <code class="language-plaintext highlighter-rouge">att_sever_init</code>。</li>
      <li>允许多次调用 <code class="language-plaintext highlighter-rouge">att_sever_init</code>，更新回调函数。</li>
    </ul>
  </li>
</ul>

<h3 id="2-库函数-2">2. 库函数</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] ING20 时钟相关：<code class="language-plaintext highlighter-rouge">TMR_GetClk</code>, <code class="language-plaintext highlighter-rouge">SYSCTRL_SelectPWMClk</code>, <code class="language-plaintext highlighter-rouge">SYSCTRL_SelectSpiClk</code></p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 ASDM：支持两种 <code class="language-plaintext highlighter-rouge">ASDM_Mode</code></p>
  </li>
  <li>
    <p>[<strong>更新</strong>] ING20 ADC：增加 <code class="language-plaintext highlighter-rouge">ADC_GetData</code>, <code class="language-plaintext highlighter-rouge">ADC_SetVref</code>, <code class="language-plaintext highlighter-rouge">ADC_HardwareCalibration</code></p>
  </li>
  <li>
    <p>[<strong>修正</strong>] USB BSP：<code class="language-plaintext highlighter-rouge">bsp_usb_disable()</code> 导致的枚举问题</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] <code class="language-plaintext highlighter-rouge">rf_enable_powerboost</code>：适配 ING20</p>
  </li>
</ul>

<h3 id="3-示例-2">3. 示例</h3>

<ul>
  <li>
    <p>[<strong>更新</strong>] <em>Voice Remote Control</em>: 演示 ING20 ASDM 的使用（包括 AMIC 和 PDM 两种解码方式）</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] 示例适配 ING20，修复相关问题，如</p>

    <ul>
      <li><em>Peripheral Beacon</em>：出现软件断言，无法运行；</li>
      <li><em>Thermometer with FOTA</em>: 升级时出现 HardFault；</li>
      <li><em>HID Mouse</em>：<code class="language-plaintext highlighter-rouge">DB_FLASH_ADDRESS</code> 地址非法。</li>
    </ul>
  </li>
</ul>

<h3 id="4-工具-2">4. 工具</h3>

<ul>
  <li>
    <p>[<strong>更新</strong>] Wizard：集成基于 pyOCD 的 RTT log 工具</p>

    <p>目前 Windows 版本的 DAP-Link RTT log 工具传输效率不及基于 <a href="https://pyocd.io/">pyOCD</a> 的
  <a href="https://github.com/ingchips/ING918XX_SDK_SOURCE/blob/master/tools/rtt_logger.py">RTT log 工具</a>，
  所以用这个工具替换了原右键菜单中的 ING-DAP-Link 工具，既支持 J-Link，也支持 DAP-Link。用法：</p>

    <ol>
      <li>安装 Python，参考 <a href="https://github.com/ingchips/ING918XX_SDK_SOURCE/tree/master/tools#rtt-logger">文档</a> 安装其它依赖项；</li>
      <li>将 Python 主程序（<code class="language-plaintext highlighter-rouge">python.exe</code>）的完整路径填写到 Wizard 选项中。</li>
    </ol>

    <p>当未配置 <code class="language-plaintext highlighter-rouge">python.exe</code> 选项时，回退使用 Windows 版本的 DAP-Link RTT log 工具。</p>
  </li>
</ul>

<h2 id="v901">v9.0.1</h2>

<h3 id="1-软件包-3">1. 软件包</h3>

<ul>
  <li>
    <p>[<strong>新增</strong>] EATT</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20 ROM：广播时可能出现断言</p>

    <p>如果遇到 <code class="language-plaintext highlighter-rouge">assertion@ble50_llm.c:...</code>，可在 <code class="language-plaintext highlighter-rouge">app_main</code> 里调用 <code class="language-plaintext highlighter-rouge">platform_rom_hotfix_using_fpb</code>。
  此补丁基于 FPB 的实现，可能与在线调试功能相互影响。</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] ING20：开启低功耗后，<code class="language-plaintext highlighter-rouge">platform_set_timer</code> 无法正确唤醒</p>
  </li>
</ul>

<h3 id="2-库函数-3">2. 库函数</h3>

<ul>
  <li>[<strong>更新</strong>] ING20：补充和完善了 PTE/GPIOTE/SYSCTRL/KeyScan 等外设的驱动</li>
</ul>

<h3 id="3-工具">3. 工具</h3>

<ul>
  <li>
    <p>[<strong>修正</strong>] Downloader：显示的 ING916 Flash 大小错误</p>

    <p>此问题由 v9.0.0 引入。</p>
  </li>
</ul>

<h3 id="4-文档">4. 文档</h3>

<ul>
  <li>[<strong>新增</strong>] 《<a href="/application-notes/pg_ing20_cn/index.html">ING20XX 系列芯片外设开发者手册</a>》</li>
</ul>

<h2 id="v900">v9.0.0</h2>

<h3 id="1-软件包-4">1. 软件包</h3>

<ul>
  <li>
    <p>[<strong>新增</strong>] 支持 ING20</p>
  </li>
  <li>
    <p>[<strong>修正</strong>] <code class="language-plaintext highlighter-rouge">ll_set_conn_acl_report_latency</code> 导致连接不稳定</p>
  </li>
</ul>

<h3 id="2-库函数-4">2. 库函数</h3>

<ul>
  <li>[<strong>新增</strong>] 支持 ING20</li>
</ul>

<h3 id="3-示例-3">3. 示例</h3>

<ul>
  <li>[<strong>更新</strong>] CherryUSB: 演示 USB Host 功能</li>
</ul>

<h3 id="4-工具-3">4. 工具</h3>

<ul>
  <li>
    <p>[<strong>新增</strong>] 支持 ING20</p>
  </li>
  <li>
    <p>[<strong>更新</strong>] Trace 相关</p>

    <p>Platform 启动时会通过 Trace 输出芯片系列、版本等基础信息。</p>

    <p><img src="../img/trace_platform_info.png" alt="" /></p>

    <p>SDK 内置的 Trace 记录工具会自动记录开始时的 PC 时间。调用 <code class="language-plaintext highlighter-rouge">platform_rt_clk_auto_tune</code> 时，
  Trace 会输出调谐后的时钟频率。基于这两项数据，Tracer 可以比较准确地显示 PC 时间，方便对照分析。</p>

    <p>利用工具函数 <code class="language-plaintext highlighter-rouge">platform_trace_raw_printf</code> 可通过 Trace 输出字符串：</p>

    <p><img src="../img/trace_printf.png" alt="" /></p>

    <p>新增菜单 “Charts -&gt; RSSI of Advertisers …”，用来生成广播的 RSSI 曲线图，支持通过最小 RSSI、地址等过滤数据。</p>

    <p><img src="../img/trace_adv_rssi.png" alt="" /></p>
  </li>
  <li>
    <p>[<strong>更新</strong>] AI Shortcuts：MCP 服务器</p>

    <p>AI Shortcuts 的 <a href="https://modelcontextprotocol.io/docs/getting-started/intro">MCP</a> 服务器提供了几个有关 SDK 的工具。
  Options 窗口的 AI Shortcuts 页面显示了 MCP 服务器 的 URL。下图显示了 <a href="https://github.com/QwenLM/qwen-code">Qwen Code</a> 使用该服务器的情形。</p>

    <p><img src="../img/ai_shortcuts_mcp.png" alt="" /></p>

    <div class="note">
  <strong>温馨提示:</strong>MCP 服务器功能正在持续迭代、优化，请及时更新 AI Shortcuts。
  </div>
  </li>
</ul>

<h2 id="使用-ing20-的-rom">使用 ING20 的 ROM</h2>

<p>ING20 ROM 内置软件包，创建新项目时选择 <em>rom</em> 即可。此时烧录的 <code class="language-plaintext highlighter-rouge">platform.bin</code> 由 <em>Platform Companion</em> 项目生成，
负责芯片初始化、启动 ROM 内的 <code class="language-plaintext highlighter-rouge">platform.bin</code>，并修正其中可能存在的问题。系统的启动流程如图。</p>

<p><img src="../img/ing20_rom_startup.png" alt="" /></p>

<p>ROM 内 platform 可能错误配置了某些寄存器。为此，<em>Platform Companion</em> 提供了热修复补丁，
需要在 <code class="language-plaintext highlighter-rouge">app_main</code> 加以调用：</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">uintptr_t</span> <span class="nf">app_main</span><span class="p">()</span>
<span class="p">{</span>
<span class="cp">#ifdef PLATFORM_IN_ROM
</span>    <span class="n">platform_rom_hotfix</span><span class="p">();</span>
    <span class="c1">// v9.0.1 及以上版本包含了基于 FPB 的补丁，可能与在线调试功能相互影响</span>
    <span class="n">platform_rom_hotfix_using_fpb</span><span class="p">();</span>
<span class="cp">#endif
</span>   <span class="p">...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>从协议栈功能看，ROM 内置软件包相当于带有扩展功能的 <em>mini</em> 包。</p>

<p>另外，ING20 也支持在 Flash 里下载 <em>typical</em>/<em>mini</em> 等不同类型的软件包，用法与 ING918、ING916 相同。</p>

        </div><!-- .post-content -->
      </div><!-- .inner-md -->
    </article><!-- .post -->

    <nav id="page-nav" class="page-nav">
      <div id="page-nav-inside" class="page-nav-inside sticky">
        <h2 class="page-nav-title">Jump to Section</h2>
      </div><!-- .page-nav-inside -->
    </nav><!-- .page-nav -->
  </div>
</div>

  <!-- Next/previous post navigation TBD -->
  <!--
  <div class="inner-md outer">
    <nav class="read-next">
      <h2 class="read-next-title line-left">Read Next</h2>
      <div class="nav-links">
        <article class="post">
          <div class="post-meta">
            <time class="published" datetime="">Previous post date</time>
          </div>
          <h3 class="post-title"><a href="#" rel="bookmark">Previous Post Title</a></h3>
        </article>
        <article class="post">
          <div class="post-meta">
            <time class="published" datetime="">Next post date</time>
          </div>
          <h3 class="post-title"><a href="#" rel="bookmark">Next Post Title</a></h3>
        </article>
      </div>
    </nav>
  </div>
  -->

  </main><!-- .site-content -->
  <footer id="colophon" class="site-footer outer">
  <div class="inner">
    <div class="site-footer-inside">
      <p class="site-info">
        
        
        <span class="copyright">&copy; INGCHIPS 2021-2025. All rights reserved.</span>
        
        
          
          
<a class="" href="https://www.stackbit.com" target="_blank" rel="noopener">
  
  Made with Stackbit
  
</a>

        
          
          
<a class="" href="https://www.flaticon.com/free-icons/chatbot" target="_blank" rel="noopener">
  
  Chatbot icons created by littleicon - Flaticon
  
</a>

        
      </p><!-- .site-info -->
      
      
      <div class="social-links">
        
          
          
<a class="button button-icon" href="https://github.com/ingchips" target="_blank" rel="noopener">
  
  <span class="icon fab fa-github" aria-hidden="true"></span><span class="screen-reader-text">GitHub</span>
  
</a>

        
      </div><!-- .social-links -->
      
    </div><!-- .site-footer-inside -->
  </div><!-- .inner -->
</footer><!-- .site-footer -->

</div><!-- .site -->

        <!-- Scripts -->
        <script src="/assets/js/plugins.js"></script>
        <script src="/assets/js/prism.js" data-manual></script>
        <script src="/assets/js/main.js"></script>

        <button id="ai-button">AI</button>
    </body>
</html>
