<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Platform API Reference | INGCHIPS SDK User Guide</title>
  <meta name="description" content="This is the user guide of INGCHIPS SDK." />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Platform API Reference | INGCHIPS SDK User Guide" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/./img/sdk_overview.png" />
  <meta property="og:description" content="This is the user guide of INGCHIPS SDK." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Platform API Reference | INGCHIPS SDK User Guide" />
  
  <meta name="twitter:description" content="This is the user guide of INGCHIPS SDK." />
  <meta name="twitter:image" content="/./img/sdk_overview.png" />

<meta name="author" content="Ingchips Technology Co., Ltd." />


<meta name="date" content="2022-10-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dive-into-sdk.html"/>
<link rel="next" href="revision-history.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">User Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#scope"><i class="fa fa-check"></i><b>2.1</b> Scope</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#architecture"><i class="fa fa-check"></i><b>2.2</b> Architecture</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#rtos-bundles"><i class="fa fa-check"></i><b>2.2.1</b> RTOS Bundles</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro.html"><a href="intro.html#noos-bundles"><i class="fa fa-check"></i><b>2.2.2</b> “NoOS” Bundles</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#abbreviations-terminology"><i class="fa fa-check"></i><b>2.3</b> Abbreviations &amp; Terminology</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#references"><i class="fa fa-check"></i><b>2.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tutorial.html"><a href="tutorial.html"><i class="fa fa-check"></i><b>3</b> Tutorials</a><ul>
<li class="chapter" data-level="3.1" data-path="tutorial.html"><a href="tutorial.html#ch1-hello-world"><i class="fa fa-check"></i><b>3.1</b> Hello World</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tutorial.html"><a href="tutorial.html#development-tool-page"><i class="fa fa-check"></i><b>3.1.1</b> <code>Development Tool</code> Page</a></li>
<li class="chapter" data-level="3.1.2" data-path="tutorial.html"><a href="tutorial.html#choose-chip-series-page"><i class="fa fa-check"></i><b>3.1.2</b> <code>Choose Chip Series</code> Page</a></li>
<li class="chapter" data-level="3.1.3" data-path="tutorial.html"><a href="tutorial.html#choose-project-type-page"><i class="fa fa-check"></i><b>3.1.3</b> <code>Choose Project Type</code> Page</a></li>
<li class="chapter" data-level="3.1.4" data-path="tutorial.html"><a href="tutorial.html#role-of-your-device-page"><i class="fa fa-check"></i><b>3.1.4</b> <code>Role of Your Device</code> Page</a></li>
<li class="chapter" data-level="3.1.5" data-path="tutorial.html"><a href="tutorial.html#peripheral-setup-page"><i class="fa fa-check"></i><b>3.1.5</b> <code>Peripheral Setup</code> Page</a></li>
<li class="chapter" data-level="3.1.6" data-path="tutorial.html"><a href="tutorial.html#security-privacy-page"><i class="fa fa-check"></i><b>3.1.6</b> <code>Security &amp; Privacy</code> Page</a></li>
<li class="chapter" data-level="3.1.7" data-path="tutorial.html"><a href="tutorial.html#firmare-over-the-air-page"><i class="fa fa-check"></i><b>3.1.7</b> <code>Firmare Over-The-Air</code> Page</a></li>
<li class="chapter" data-level="3.1.8" data-path="tutorial.html"><a href="tutorial.html#common-functions-page"><i class="fa fa-check"></i><b>3.1.8</b> <code>Common Functions</code> Page</a></li>
<li class="chapter" data-level="3.1.9" data-path="tutorial.html"><a href="tutorial.html#build-your-project"><i class="fa fa-check"></i><b>3.1.9</b> Build your project</a></li>
<li class="chapter" data-level="3.1.10" data-path="tutorial.html"><a href="tutorial.html#download"><i class="fa fa-check"></i><b>3.1.10</b> Download</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tutorial.html"><a href="tutorial.html#ibeacon"><i class="fa fa-check"></i><b>3.2</b> iBeacon</a><ul>
<li class="chapter" data-level="3.2.1" data-path="tutorial.html"><a href="tutorial.html#setup-advertising-data"><i class="fa fa-check"></i><b>3.2.1</b> Setup Advertising Data</a></li>
<li class="chapter" data-level="3.2.2" data-path="tutorial.html"><a href="tutorial.html#try-it"><i class="fa fa-check"></i><b>3.2.2</b> Try It</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tutorial.html"><a href="tutorial.html#thermometer"><i class="fa fa-check"></i><b>3.3</b> Thermometer</a><ul>
<li class="chapter" data-level="3.3.1" data-path="tutorial.html"><a href="tutorial.html#setup-advertising-data-1"><i class="fa fa-check"></i><b>3.3.1</b> Setup Advertising Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="tutorial.html"><a href="tutorial.html#setup-gatt-profile"><i class="fa fa-check"></i><b>3.3.2</b> Setup GATT Profile</a></li>
<li class="chapter" data-level="3.3.3" data-path="tutorial.html"><a href="tutorial.html#write-the-code"><i class="fa fa-check"></i><b>3.3.3</b> Write the Code</a></li>
<li class="chapter" data-level="3.3.4" data-path="tutorial.html"><a href="tutorial.html#notification"><i class="fa fa-check"></i><b>3.3.4</b> Notification</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tutorial.html"><a href="tutorial.html#thermometer-with-fota"><i class="fa fa-check"></i><b>3.4</b> Thermometer with FOTA</a><ul>
<li class="chapter" data-level="3.4.1" data-path="tutorial.html"><a href="tutorial.html#device-with-fota"><i class="fa fa-check"></i><b>3.4.1</b> Device with FOTA</a></li>
<li class="chapter" data-level="3.4.2" data-path="tutorial.html"><a href="tutorial.html#make-a-new-version"><i class="fa fa-check"></i><b>3.4.2</b> Make a New Version</a></li>
<li class="chapter" data-level="3.4.3" data-path="tutorial.html"><a href="tutorial.html#fota-server"><i class="fa fa-check"></i><b>3.4.3</b> FOTA Server</a></li>
<li class="chapter" data-level="3.4.4" data-path="tutorial.html"><a href="tutorial.html#try-it-1"><i class="fa fa-check"></i><b>3.4.4</b> Try It</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tutorial.html"><a href="tutorial.html#ibeacon-scanner"><i class="fa fa-check"></i><b>3.5</b> iBeacon Scanner</a><ul>
<li class="chapter" data-level="3.5.1" data-path="tutorial.html"><a href="tutorial.html#distance-estimation"><i class="fa fa-check"></i><b>3.5.1</b> Distance Estimation</a></li>
<li class="chapter" data-level="3.5.2" data-path="tutorial.html"><a href="tutorial.html#concurrent-advertising-scanning"><i class="fa fa-check"></i><b>3.5.2</b> Concurrent Advertising &amp; Scanning</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tutorial.html"><a href="tutorial.html#notification-indication"><i class="fa fa-check"></i><b>3.6</b> Notification &amp; Indication</a><ul>
<li class="chapter" data-level="3.6.1" data-path="tutorial.html"><a href="tutorial.html#inter-task-comm"><i class="fa fa-check"></i><b>3.6.1</b> Inter-task Communication</a></li>
<li class="chapter" data-level="3.6.2" data-path="tutorial.html"><a href="tutorial.html#timer"><i class="fa fa-check"></i><b>3.6.2</b> Timer</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="tutorial.html"><a href="tutorial.html#throughput"><i class="fa fa-check"></i><b>3.7</b> Throughput</a><ul>
<li class="chapter" data-level="3.7.1" data-path="tutorial.html"><a href="tutorial.html#theoretical-peak-throughput"><i class="fa fa-check"></i><b>3.7.1</b> Theoretical Peak Throughput</a></li>
<li class="chapter" data-level="3.7.2" data-path="tutorial.html"><a href="tutorial.html#test-throughput"><i class="fa fa-check"></i><b>3.7.2</b> Test Throughput</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="tutorial.html"><a href="tutorial.html#dual-role-ble-gateway"><i class="fa fa-check"></i><b>3.8</b> Dual Role &amp; BLE Gateway</a><ul>
<li class="chapter" data-level="3.8.1" data-path="tutorial.html"><a href="tutorial.html#use-ingwizard-to-create-a-peripheral-app"><i class="fa fa-check"></i><b>3.8.1</b> Use <code>ingWizard</code> to create a peripheral app</a></li>
<li class="chapter" data-level="3.8.2" data-path="tutorial.html"><a href="tutorial.html#define-thermometer-data"><i class="fa fa-check"></i><b>3.8.2</b> Define Thermometer Data</a></li>
<li class="chapter" data-level="3.8.3" data-path="tutorial.html"><a href="tutorial.html#scan-for-thermometers"><i class="fa fa-check"></i><b>3.8.3</b> Scan for Thermometers</a></li>
<li class="chapter" data-level="3.8.4" data-path="tutorial.html"><a href="tutorial.html#discover-services"><i class="fa fa-check"></i><b>3.8.4</b> Discover Services</a></li>
<li class="chapter" data-level="3.8.5" data-path="tutorial.html"><a href="tutorial.html#data-handling"><i class="fa fa-check"></i><b>3.8.5</b> Data Handling</a></li>
<li class="chapter" data-level="3.8.6" data-path="tutorial.html"><a href="tutorial.html#robustness"><i class="fa fa-check"></i><b>3.8.6</b> Robustness</a></li>
<li class="chapter" data-level="3.8.7" data-path="tutorial.html"><a href="tutorial.html#prepare-thermometers"><i class="fa fa-check"></i><b>3.8.7</b> Prepare Thermometers</a></li>
<li class="chapter" data-level="3.8.8" data-path="tutorial.html"><a href="tutorial.html#test"><i class="fa fa-check"></i><b>3.8.8</b> Test</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="tutorial.html"><a href="tutorial.html#hello-nim"><i class="fa fa-check"></i><b>3.9</b> Hello, Nim</a><ul>
<li class="chapter" data-level="3.9.1" data-path="tutorial.html"><a href="tutorial.html#create-a-nim-project"><i class="fa fa-check"></i><b>3.9.1</b> Create a <code>Nim</code> Project</a></li>
<li class="chapter" data-level="3.9.2" data-path="tutorial.html"><a href="tutorial.html#create-advertising-data"><i class="fa fa-check"></i><b>3.9.2</b> Create Advertising Data</a></li>
<li class="chapter" data-level="3.9.3" data-path="tutorial.html"><a href="tutorial.html#create-profile-data"><i class="fa fa-check"></i><b>3.9.3</b> Create Profile Data</a></li>
<li class="chapter" data-level="3.9.4" data-path="tutorial.html"><a href="tutorial.html#benefits-of-adopting-nim"><i class="fa fa-check"></i><b>3.9.4</b> Benefits of Adopting <code>Nim</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="core-tools.html"><a href="core-tools.html"><i class="fa fa-check"></i><b>4</b> Core Tools</a><ul>
<li class="chapter" data-level="4.1" data-path="core-tools.html"><a href="core-tools.html#ingwizard"><i class="fa fa-check"></i><b>4.1</b> ingWizard</a></li>
<li class="chapter" data-level="4.2" data-path="core-tools.html"><a href="core-tools.html#ch2-downloader"><i class="fa fa-check"></i><b>4.2</b> Downloader</a><ul>
<li class="chapter" data-level="4.2.1" data-path="core-tools.html"><a href="core-tools.html#introduction"><i class="fa fa-check"></i><b>4.2.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2.2" data-path="core-tools.html"><a href="core-tools.html#script-mass-prod"><i class="fa fa-check"></i><b>4.2.2</b> Scripting &amp; Mass Production</a></li>
<li class="chapter" data-level="4.2.3" data-path="core-tools.html"><a href="core-tools.html#flash-read-protection"><i class="fa fa-check"></i><b>4.2.3</b> Flash Read Protection</a></li>
<li class="chapter" data-level="4.2.4" data-path="core-tools.html"><a href="core-tools.html#python-version"><i class="fa fa-check"></i><b>4.2.4</b> Python Version</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="core-tools.html"><a href="core-tools.html#ingtracer"><i class="fa fa-check"></i><b>4.3</b> ingTracer</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html"><i class="fa fa-check"></i><b>5</b> Dive Into SDK</a><ul>
<li class="chapter" data-level="5.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#memory-management"><i class="fa fa-check"></i><b>5.1</b> Memory Management</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#global-variables"><i class="fa fa-check"></i><b>5.1.1</b> Global Variables</a></li>
<li class="chapter" data-level="5.1.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#using-stack"><i class="fa fa-check"></i><b>5.1.2</b> Using Stack</a></li>
<li class="chapter" data-level="5.1.3" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#using-heap"><i class="fa fa-check"></i><b>5.1.3</b> Using Heap</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#multitasking"><i class="fa fa-check"></i><b>5.2</b> Multitasking</a></li>
<li class="chapter" data-level="5.3" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#interrupt-management"><i class="fa fa-check"></i><b>5.3</b> Interrupt Management</a></li>
<li class="chapter" data-level="5.4" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#power-management"><i class="fa fa-check"></i><b>5.4</b> Power Management</a></li>
<li class="chapter" data-level="5.5" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#cmsis-api"><i class="fa fa-check"></i><b>5.5</b> CMSIS API</a></li>
<li class="chapter" data-level="5.6" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#debugging-tracing"><i class="fa fa-check"></i><b>5.6</b> Debugging &amp; Tracing</a><ul>
<li class="chapter" data-level="5.6.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#tips-on-segger-rtt"><i class="fa fa-check"></i><b>5.6.1</b> Tips on SEGGER RTT</a></li>
<li class="chapter" data-level="5.6.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#memory-dump"><i class="fa fa-check"></i><b>5.6.2</b> Memory Dump</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="api-ref.html"><a href="api-ref.html"><i class="fa fa-check"></i><b>6</b> Platform API Reference</a><ul>
<li class="chapter" data-level="6.1" data-path="api-ref.html"><a href="api-ref.html#platform_32k_rc_auto_tune"><i class="fa fa-check"></i><b>6.1</b> <code>platform_32k_rc_auto_tune</code></a><ul>
<li class="chapter" data-level="6.1.1" data-path="api-ref.html"><a href="api-ref.html#prototype"><i class="fa fa-check"></i><b>6.1.1</b> Prototype</a></li>
<li class="chapter" data-level="6.1.2" data-path="api-ref.html"><a href="api-ref.html#parameters"><i class="fa fa-check"></i><b>6.1.2</b> Parameters</a></li>
<li class="chapter" data-level="6.1.3" data-path="api-ref.html"><a href="api-ref.html#return-value"><i class="fa fa-check"></i><b>6.1.3</b> Return Value</a></li>
<li class="chapter" data-level="6.1.4" data-path="api-ref.html"><a href="api-ref.html#remarks"><i class="fa fa-check"></i><b>6.1.4</b> Remarks</a></li>
<li class="chapter" data-level="6.1.5" data-path="api-ref.html"><a href="api-ref.html#example"><i class="fa fa-check"></i><b>6.1.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="api-ref.html"><a href="api-ref.html#platform_32k_rc_tune"><i class="fa fa-check"></i><b>6.2</b> <code>platform_32k_rc_tune</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="api-ref.html"><a href="api-ref.html#prototype-1"><i class="fa fa-check"></i><b>6.2.1</b> Prototype</a></li>
<li class="chapter" data-level="6.2.2" data-path="api-ref.html"><a href="api-ref.html#parameters-1"><i class="fa fa-check"></i><b>6.2.2</b> Parameters</a></li>
<li class="chapter" data-level="6.2.3" data-path="api-ref.html"><a href="api-ref.html#return-value-1"><i class="fa fa-check"></i><b>6.2.3</b> Return Value</a></li>
<li class="chapter" data-level="6.2.4" data-path="api-ref.html"><a href="api-ref.html#remarks-1"><i class="fa fa-check"></i><b>6.2.4</b> Remarks</a></li>
<li class="chapter" data-level="6.2.5" data-path="api-ref.html"><a href="api-ref.html#example-1"><i class="fa fa-check"></i><b>6.2.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="api-ref.html"><a href="api-ref.html#platform_config"><i class="fa fa-check"></i><b>6.3</b> <code>platform_config</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="api-ref.html"><a href="api-ref.html#prototype-2"><i class="fa fa-check"></i><b>6.3.1</b> Prototype</a></li>
<li class="chapter" data-level="6.3.2" data-path="api-ref.html"><a href="api-ref.html#parameters-2"><i class="fa fa-check"></i><b>6.3.2</b> Parameters</a></li>
<li class="chapter" data-level="6.3.3" data-path="api-ref.html"><a href="api-ref.html#return-value-2"><i class="fa fa-check"></i><b>6.3.3</b> Return Value</a></li>
<li class="chapter" data-level="6.3.4" data-path="api-ref.html"><a href="api-ref.html#remarks-2"><i class="fa fa-check"></i><b>6.3.4</b> Remarks</a></li>
<li class="chapter" data-level="6.3.5" data-path="api-ref.html"><a href="api-ref.html#example-2"><i class="fa fa-check"></i><b>6.3.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="api-ref.html"><a href="api-ref.html#platform_get_heap_status"><i class="fa fa-check"></i><b>6.4</b> <code>platform_get_heap_status</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="api-ref.html"><a href="api-ref.html#prototype-3"><i class="fa fa-check"></i><b>6.4.1</b> Prototype</a></li>
<li class="chapter" data-level="6.4.2" data-path="api-ref.html"><a href="api-ref.html#parameters-3"><i class="fa fa-check"></i><b>6.4.2</b> Parameters</a></li>
<li class="chapter" data-level="6.4.3" data-path="api-ref.html"><a href="api-ref.html#return-value-3"><i class="fa fa-check"></i><b>6.4.3</b> Return Value</a></li>
<li class="chapter" data-level="6.4.4" data-path="api-ref.html"><a href="api-ref.html#remarks-3"><i class="fa fa-check"></i><b>6.4.4</b> Remarks</a></li>
<li class="chapter" data-level="6.4.5" data-path="api-ref.html"><a href="api-ref.html#example-3"><i class="fa fa-check"></i><b>6.4.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="api-ref.html"><a href="api-ref.html#platform_get_us_time"><i class="fa fa-check"></i><b>6.5</b> <code>platform_get_us_time</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="api-ref.html"><a href="api-ref.html#prototype-4"><i class="fa fa-check"></i><b>6.5.1</b> Prototype</a></li>
<li class="chapter" data-level="6.5.2" data-path="api-ref.html"><a href="api-ref.html#parameters-4"><i class="fa fa-check"></i><b>6.5.2</b> Parameters</a></li>
<li class="chapter" data-level="6.5.3" data-path="api-ref.html"><a href="api-ref.html#return-value-4"><i class="fa fa-check"></i><b>6.5.3</b> Return Value</a></li>
<li class="chapter" data-level="6.5.4" data-path="api-ref.html"><a href="api-ref.html#remarks-4"><i class="fa fa-check"></i><b>6.5.4</b> Remarks</a></li>
<li class="chapter" data-level="6.5.5" data-path="api-ref.html"><a href="api-ref.html#example-4"><i class="fa fa-check"></i><b>6.5.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="api-ref.html"><a href="api-ref.html#platform_get_version"><i class="fa fa-check"></i><b>6.6</b> <code>platform_get_version</code></a><ul>
<li class="chapter" data-level="6.6.1" data-path="api-ref.html"><a href="api-ref.html#prototype-5"><i class="fa fa-check"></i><b>6.6.1</b> Prototype</a></li>
<li class="chapter" data-level="6.6.2" data-path="api-ref.html"><a href="api-ref.html#parameters-5"><i class="fa fa-check"></i><b>6.6.2</b> Parameters</a></li>
<li class="chapter" data-level="6.6.3" data-path="api-ref.html"><a href="api-ref.html#return-value-5"><i class="fa fa-check"></i><b>6.6.3</b> Return Value</a></li>
<li class="chapter" data-level="6.6.4" data-path="api-ref.html"><a href="api-ref.html#remarks-5"><i class="fa fa-check"></i><b>6.6.4</b> Remarks</a></li>
<li class="chapter" data-level="6.6.5" data-path="api-ref.html"><a href="api-ref.html#example-5"><i class="fa fa-check"></i><b>6.6.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="api-ref.html"><a href="api-ref.html#platform_hrng"><i class="fa fa-check"></i><b>6.7</b> <code>platform_hrng</code></a><ul>
<li class="chapter" data-level="6.7.1" data-path="api-ref.html"><a href="api-ref.html#prototype-6"><i class="fa fa-check"></i><b>6.7.1</b> Prototype</a></li>
<li class="chapter" data-level="6.7.2" data-path="api-ref.html"><a href="api-ref.html#parameters-6"><i class="fa fa-check"></i><b>6.7.2</b> Parameters</a></li>
<li class="chapter" data-level="6.7.3" data-path="api-ref.html"><a href="api-ref.html#return-value-6"><i class="fa fa-check"></i><b>6.7.3</b> Return Value</a></li>
<li class="chapter" data-level="6.7.4" data-path="api-ref.html"><a href="api-ref.html#remarks-6"><i class="fa fa-check"></i><b>6.7.4</b> Remarks</a></li>
<li class="chapter" data-level="6.7.5" data-path="api-ref.html"><a href="api-ref.html#example-6"><i class="fa fa-check"></i><b>6.7.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="api-ref.html"><a href="api-ref.html#platform_install_isr_stack"><i class="fa fa-check"></i><b>6.8</b> <code>platform_install_isr_stack</code></a><ul>
<li class="chapter" data-level="6.8.1" data-path="api-ref.html"><a href="api-ref.html#prototype-7"><i class="fa fa-check"></i><b>6.8.1</b> Prototype</a></li>
<li class="chapter" data-level="6.8.2" data-path="api-ref.html"><a href="api-ref.html#parameters-7"><i class="fa fa-check"></i><b>6.8.2</b> Parameters</a></li>
<li class="chapter" data-level="6.8.3" data-path="api-ref.html"><a href="api-ref.html#return-value-7"><i class="fa fa-check"></i><b>6.8.3</b> Return Value</a></li>
<li class="chapter" data-level="6.8.4" data-path="api-ref.html"><a href="api-ref.html#remarks-7"><i class="fa fa-check"></i><b>6.8.4</b> Remarks</a></li>
<li class="chapter" data-level="6.8.5" data-path="api-ref.html"><a href="api-ref.html#example-7"><i class="fa fa-check"></i><b>6.8.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="api-ref.html"><a href="api-ref.html#platform_printf"><i class="fa fa-check"></i><b>6.9</b> <code>platform_printf</code></a><ul>
<li class="chapter" data-level="6.9.1" data-path="api-ref.html"><a href="api-ref.html#prototype-8"><i class="fa fa-check"></i><b>6.9.1</b> Prototype</a></li>
<li class="chapter" data-level="6.9.2" data-path="api-ref.html"><a href="api-ref.html#parameters-8"><i class="fa fa-check"></i><b>6.9.2</b> Parameters</a></li>
<li class="chapter" data-level="6.9.3" data-path="api-ref.html"><a href="api-ref.html#return-value-8"><i class="fa fa-check"></i><b>6.9.3</b> Return Value</a></li>
<li class="chapter" data-level="6.9.4" data-path="api-ref.html"><a href="api-ref.html#remarks-8"><i class="fa fa-check"></i><b>6.9.4</b> Remarks</a></li>
<li class="chapter" data-level="6.9.5" data-path="api-ref.html"><a href="api-ref.html#example-8"><i class="fa fa-check"></i><b>6.9.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="api-ref.html"><a href="api-ref.html#platform_raise_assertion"><i class="fa fa-check"></i><b>6.10</b> <code>platform_raise_assertion</code></a><ul>
<li class="chapter" data-level="6.10.1" data-path="api-ref.html"><a href="api-ref.html#prototype-9"><i class="fa fa-check"></i><b>6.10.1</b> Prototype</a></li>
<li class="chapter" data-level="6.10.2" data-path="api-ref.html"><a href="api-ref.html#parameters-9"><i class="fa fa-check"></i><b>6.10.2</b> Parameters</a></li>
<li class="chapter" data-level="6.10.3" data-path="api-ref.html"><a href="api-ref.html#return-value-9"><i class="fa fa-check"></i><b>6.10.3</b> Return Value</a></li>
<li class="chapter" data-level="6.10.4" data-path="api-ref.html"><a href="api-ref.html#remarks-9"><i class="fa fa-check"></i><b>6.10.4</b> Remarks</a></li>
<li class="chapter" data-level="6.10.5" data-path="api-ref.html"><a href="api-ref.html#example-9"><i class="fa fa-check"></i><b>6.10.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="api-ref.html"><a href="api-ref.html#platform_rand"><i class="fa fa-check"></i><b>6.11</b> <code>platform_rand</code></a><ul>
<li class="chapter" data-level="6.11.1" data-path="api-ref.html"><a href="api-ref.html#prototype-10"><i class="fa fa-check"></i><b>6.11.1</b> Prototype</a></li>
<li class="chapter" data-level="6.11.2" data-path="api-ref.html"><a href="api-ref.html#parameters-10"><i class="fa fa-check"></i><b>6.11.2</b> Parameters</a></li>
<li class="chapter" data-level="6.11.3" data-path="api-ref.html"><a href="api-ref.html#return-value-10"><i class="fa fa-check"></i><b>6.11.3</b> Return Value</a></li>
<li class="chapter" data-level="6.11.4" data-path="api-ref.html"><a href="api-ref.html#remarks-10"><i class="fa fa-check"></i><b>6.11.4</b> Remarks</a></li>
<li class="chapter" data-level="6.11.5" data-path="api-ref.html"><a href="api-ref.html#example-10"><i class="fa fa-check"></i><b>6.11.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="api-ref.html"><a href="api-ref.html#platform_read_info"><i class="fa fa-check"></i><b>6.12</b> <code>platform_read_info</code></a><ul>
<li class="chapter" data-level="6.12.1" data-path="api-ref.html"><a href="api-ref.html#prototype-11"><i class="fa fa-check"></i><b>6.12.1</b> Prototype</a></li>
<li class="chapter" data-level="6.12.2" data-path="api-ref.html"><a href="api-ref.html#parameters-11"><i class="fa fa-check"></i><b>6.12.2</b> Parameters</a></li>
<li class="chapter" data-level="6.12.3" data-path="api-ref.html"><a href="api-ref.html#return-value-11"><i class="fa fa-check"></i><b>6.12.3</b> Return Value</a></li>
<li class="chapter" data-level="6.12.4" data-path="api-ref.html"><a href="api-ref.html#remarks-11"><i class="fa fa-check"></i><b>6.12.4</b> Remarks</a></li>
<li class="chapter" data-level="6.12.5" data-path="api-ref.html"><a href="api-ref.html#example-11"><i class="fa fa-check"></i><b>6.12.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="api-ref.html"><a href="api-ref.html#platform_read_persistent_reg"><i class="fa fa-check"></i><b>6.13</b> <code>platform_read_persistent_reg</code></a><ul>
<li class="chapter" data-level="6.13.1" data-path="api-ref.html"><a href="api-ref.html#prototype-12"><i class="fa fa-check"></i><b>6.13.1</b> Prototype</a></li>
<li class="chapter" data-level="6.13.2" data-path="api-ref.html"><a href="api-ref.html#parameters-12"><i class="fa fa-check"></i><b>6.13.2</b> Parameters</a></li>
<li class="chapter" data-level="6.13.3" data-path="api-ref.html"><a href="api-ref.html#return-value-12"><i class="fa fa-check"></i><b>6.13.3</b> Return Value</a></li>
<li class="chapter" data-level="6.13.4" data-path="api-ref.html"><a href="api-ref.html#remarks-12"><i class="fa fa-check"></i><b>6.13.4</b> Remarks</a></li>
<li class="chapter" data-level="6.13.5" data-path="api-ref.html"><a href="api-ref.html#example-12"><i class="fa fa-check"></i><b>6.13.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="api-ref.html"><a href="api-ref.html#platform_reset"><i class="fa fa-check"></i><b>6.14</b> <code>platform_reset</code></a><ul>
<li class="chapter" data-level="6.14.1" data-path="api-ref.html"><a href="api-ref.html#prototype-13"><i class="fa fa-check"></i><b>6.14.1</b> Prototype</a></li>
<li class="chapter" data-level="6.14.2" data-path="api-ref.html"><a href="api-ref.html#parameters-13"><i class="fa fa-check"></i><b>6.14.2</b> Parameters</a></li>
<li class="chapter" data-level="6.14.3" data-path="api-ref.html"><a href="api-ref.html#return-value-13"><i class="fa fa-check"></i><b>6.14.3</b> Return Value</a></li>
<li class="chapter" data-level="6.14.4" data-path="api-ref.html"><a href="api-ref.html#remarks-13"><i class="fa fa-check"></i><b>6.14.4</b> Remarks</a></li>
<li class="chapter" data-level="6.14.5" data-path="api-ref.html"><a href="api-ref.html#example-13"><i class="fa fa-check"></i><b>6.14.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.15" data-path="api-ref.html"><a href="api-ref.html#platform_set_evt_callback"><i class="fa fa-check"></i><b>6.15</b> <code>platform_set_evt_callback</code></a><ul>
<li class="chapter" data-level="6.15.1" data-path="api-ref.html"><a href="api-ref.html#prototype-14"><i class="fa fa-check"></i><b>6.15.1</b> Prototype</a></li>
<li class="chapter" data-level="6.15.2" data-path="api-ref.html"><a href="api-ref.html#parameters-14"><i class="fa fa-check"></i><b>6.15.2</b> Parameters</a></li>
<li class="chapter" data-level="6.15.3" data-path="api-ref.html"><a href="api-ref.html#return-value-14"><i class="fa fa-check"></i><b>6.15.3</b> Return Value</a></li>
<li class="chapter" data-level="6.15.4" data-path="api-ref.html"><a href="api-ref.html#remarks-14"><i class="fa fa-check"></i><b>6.15.4</b> Remarks</a></li>
<li class="chapter" data-level="6.15.5" data-path="api-ref.html"><a href="api-ref.html#example-14"><i class="fa fa-check"></i><b>6.15.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.16" data-path="api-ref.html"><a href="api-ref.html#platform_set_irq_callback"><i class="fa fa-check"></i><b>6.16</b> <code>platform_set_irq_callback</code></a><ul>
<li class="chapter" data-level="6.16.1" data-path="api-ref.html"><a href="api-ref.html#prototype-15"><i class="fa fa-check"></i><b>6.16.1</b> Prototype</a></li>
<li class="chapter" data-level="6.16.2" data-path="api-ref.html"><a href="api-ref.html#parameters-15"><i class="fa fa-check"></i><b>6.16.2</b> Parameters</a></li>
<li class="chapter" data-level="6.16.3" data-path="api-ref.html"><a href="api-ref.html#return-value-15"><i class="fa fa-check"></i><b>6.16.3</b> Return Value</a></li>
<li class="chapter" data-level="6.16.4" data-path="api-ref.html"><a href="api-ref.html#remarks-15"><i class="fa fa-check"></i><b>6.16.4</b> Remarks</a></li>
<li class="chapter" data-level="6.16.5" data-path="api-ref.html"><a href="api-ref.html#example-15"><i class="fa fa-check"></i><b>6.16.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.17" data-path="api-ref.html"><a href="api-ref.html#platform_shutdown"><i class="fa fa-check"></i><b>6.17</b> <code>platform_shutdown</code></a><ul>
<li class="chapter" data-level="6.17.1" data-path="api-ref.html"><a href="api-ref.html#prototype-16"><i class="fa fa-check"></i><b>6.17.1</b> Prototype</a></li>
<li class="chapter" data-level="6.17.2" data-path="api-ref.html"><a href="api-ref.html#parameters-16"><i class="fa fa-check"></i><b>6.17.2</b> Parameters</a></li>
<li class="chapter" data-level="6.17.3" data-path="api-ref.html"><a href="api-ref.html#return-value-16"><i class="fa fa-check"></i><b>6.17.3</b> Return Value</a></li>
<li class="chapter" data-level="6.17.4" data-path="api-ref.html"><a href="api-ref.html#remarks-16"><i class="fa fa-check"></i><b>6.17.4</b> Remarks</a></li>
<li class="chapter" data-level="6.17.5" data-path="api-ref.html"><a href="api-ref.html#example-16"><i class="fa fa-check"></i><b>6.17.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.18" data-path="api-ref.html"><a href="api-ref.html#api-switch-app"><i class="fa fa-check"></i><b>6.18</b> <code>platform_switch_app</code></a><ul>
<li class="chapter" data-level="6.18.1" data-path="api-ref.html"><a href="api-ref.html#prototype-17"><i class="fa fa-check"></i><b>6.18.1</b> Prototype</a></li>
<li class="chapter" data-level="6.18.2" data-path="api-ref.html"><a href="api-ref.html#parameters-17"><i class="fa fa-check"></i><b>6.18.2</b> Parameters</a></li>
<li class="chapter" data-level="6.18.3" data-path="api-ref.html"><a href="api-ref.html#return-value-17"><i class="fa fa-check"></i><b>6.18.3</b> Return Value</a></li>
<li class="chapter" data-level="6.18.4" data-path="api-ref.html"><a href="api-ref.html#remarks-17"><i class="fa fa-check"></i><b>6.18.4</b> Remarks</a></li>
<li class="chapter" data-level="6.18.5" data-path="api-ref.html"><a href="api-ref.html#example-17"><i class="fa fa-check"></i><b>6.18.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.19" data-path="api-ref.html"><a href="api-ref.html#platform_write_persistent_reg"><i class="fa fa-check"></i><b>6.19</b> <code>platform_write_persistent_reg</code></a><ul>
<li class="chapter" data-level="6.19.1" data-path="api-ref.html"><a href="api-ref.html#prototype-18"><i class="fa fa-check"></i><b>6.19.1</b> Prototype</a></li>
<li class="chapter" data-level="6.19.2" data-path="api-ref.html"><a href="api-ref.html#parameters-18"><i class="fa fa-check"></i><b>6.19.2</b> Parameters</a></li>
<li class="chapter" data-level="6.19.3" data-path="api-ref.html"><a href="api-ref.html#return-value-18"><i class="fa fa-check"></i><b>6.19.3</b> Return Value</a></li>
<li class="chapter" data-level="6.19.4" data-path="api-ref.html"><a href="api-ref.html#remarks-18"><i class="fa fa-check"></i><b>6.19.4</b> Remarks</a></li>
<li class="chapter" data-level="6.19.5" data-path="api-ref.html"><a href="api-ref.html#example-18"><i class="fa fa-check"></i><b>6.19.5</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="6.20" data-path="api-ref.html"><a href="api-ref.html#syssetpublicdeviceaddr"><i class="fa fa-check"></i><b>6.20</b> <code>sysSetPublicDeviceAddr</code></a><ul>
<li class="chapter" data-level="6.20.1" data-path="api-ref.html"><a href="api-ref.html#prototype-19"><i class="fa fa-check"></i><b>6.20.1</b> Prototype</a></li>
<li class="chapter" data-level="6.20.2" data-path="api-ref.html"><a href="api-ref.html#parameters-19"><i class="fa fa-check"></i><b>6.20.2</b> Parameters</a></li>
<li class="chapter" data-level="6.20.3" data-path="api-ref.html"><a href="api-ref.html#return-value-19"><i class="fa fa-check"></i><b>6.20.3</b> Return Value</a></li>
<li class="chapter" data-level="6.20.4" data-path="api-ref.html"><a href="api-ref.html#remarks-19"><i class="fa fa-check"></i><b>6.20.4</b> Remarks</a></li>
<li class="chapter" data-level="6.20.5" data-path="api-ref.html"><a href="api-ref.html#example-19"><i class="fa fa-check"></i><b>6.20.5</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="revision-history.html"><a href="revision-history.html"><i class="fa fa-check"></i><b>7</b> Revision History</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">INGCHIPS SDK User Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="api-ref" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 6</span> Platform API Reference<a href="api-ref.html#api-ref" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="platform_32k_rc_auto_tune" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.1</span> <code>platform_32k_rc_auto_tune</code><a href="api-ref.html#platform_32k_rc_auto_tune" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Automatically tune the internal 32k RC clock, and get the tuning value.</p>
<div id="prototype" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.1.1</span> Prototype<a href="api-ref.html#prototype" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="api-ref.html#cb39-1"></a><span class="dt">uint16_t</span> platform_32k_rc_auto_tune(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.1.2</span> Parameters<a href="api-ref.html#parameters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.1.3</span> Return Value<a href="api-ref.html#return-value" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The 16-bits tuning value.</p>
</div>
<div id="remarks" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.1.4</span> Remarks<a href="api-ref.html#remarks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This operation costs ~250ms. It is recommended to call this once and store the
returned value for later usage.</p>
</div>
<div id="example" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.1.5</span> Example<a href="api-ref.html#example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="api-ref.html#cb40-1"></a><span class="dt">uint16_t</span> value = platform_32k_rc_auto_tune();</span></code></pre></div>
</div>
</div>
<div id="platform_32k_rc_tune" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.2</span> <code>platform_32k_rc_tune</code><a href="api-ref.html#platform_32k_rc_tune" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Tune internal the 32k RC clock with the tune value.</p>
<div id="prototype-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.2.1</span> Prototype<a href="api-ref.html#prototype-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="api-ref.html#cb41-1"></a><span class="dt">void</span> platform_32k_rc_tune(<span class="dt">uint16_t</span> value);</span></code></pre></div>
</div>
<div id="parameters-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.2.2</span> Parameters<a href="api-ref.html#parameters-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>uint16_t value</code></p>
<p>Value used to tune the clock (returned by <a href="api-ref.html#platform_32k_rc_auto_tune"><code>platform_32k_rc_auto_tune</code></a>)</p></li>
</ul>
</div>
<div id="return-value-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.2.3</span> Return Value<a href="api-ref.html#return-value-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.2.4</span> Remarks<a href="api-ref.html#remarks-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>void.</p>
</div>
<div id="example-1" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.2.5</span> Example<a href="api-ref.html#example-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="api-ref.html#cb42-1"></a>platform_32k_rc_tune(value);</span></code></pre></div>
</div>
</div>
<div id="platform_config" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.3</span> <code>platform_config</code><a href="api-ref.html#platform_config" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Configure some platform functionalities.</p>
<div id="prototype-2" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.3.1</span> Prototype<a href="api-ref.html#prototype-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="api-ref.html#cb43-1"></a><span class="dt">void</span> platform_config(<span class="dt">const</span> platform_cfg_item_t item,</span>
<span id="cb43-2"><a href="api-ref.html#cb43-2"></a>                     <span class="dt">const</span> <span class="dt">uint32_t</span> flag);</span></code></pre></div>
</div>
<div id="parameters-2" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.3.2</span> Parameters<a href="api-ref.html#parameters-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const platform_cfg_item_t item</code></p>
<p>Specify the item to be configured. It can be one
of following values:</p>
<ul>
<li><p><code>PLATFORM_CFG_LOG_HCI</code>: Host controller interface messages. Default: Disabled.</p></li>
<li><p><code>PLATFORM_CFG_POWER_SAVING</code>: Power saving. Default: Disabled.</p></li>
<li><p><code>PLATFORM_CFG_TRACE_MASK</code>: Bit map of selected trace items. Default: <code>0</code>.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="api-ref.html#cb44-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb44-2"><a href="api-ref.html#cb44-2"></a>{</span>
<span id="cb44-3"><a href="api-ref.html#cb44-3"></a>    PLATFORM_TRACE_ID_EVENT                 = <span class="dv">0</span>,</span>
<span id="cb44-4"><a href="api-ref.html#cb44-4"></a>    PLATFORM_TRACE_ID_HCI_CMD               = <span class="dv">1</span>,</span>
<span id="cb44-5"><a href="api-ref.html#cb44-5"></a>    PLATFORM_TRACE_ID_HCI_EVENT             = <span class="dv">2</span>,</span>
<span id="cb44-6"><a href="api-ref.html#cb44-6"></a>    PLATFORM_TRACE_ID_HCI_ACL               = <span class="dv">3</span>,</span>
<span id="cb44-7"><a href="api-ref.html#cb44-7"></a>    PLATFORM_TRACE_ID_LLCP                  = <span class="dv">4</span></span>
<span id="cb44-8"><a href="api-ref.html#cb44-8"></a>} platform_trace_item_t;</span></code></pre></div></li>
<li><p><code>PLATFORM_CFG_RC32K_EN</code>: Enable/Disable RC 32k clock. Default: Enabled.</p></li>
<li><p><code>PLATFORM_CFG_OSC32K_EN</code>: Enable/Disable 32k crystal oscillator. Default: Enabled.</p></li>
<li><p><code>PLATFORM_CFG_32K_CLK</code>: 32k clock selection. Flag is <code>platform_32k_clk_src_t</code>. Default: <code>PLATFORM_32K_RC</code></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="api-ref.html#cb45-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb45-2"><a href="api-ref.html#cb45-2"></a>{    </span>
<span id="cb45-3"><a href="api-ref.html#cb45-3"></a>    PLATFORM_32K_OSC,           <span class="co">// External 32k crystal oscillator</span></span>
<span id="cb45-4"><a href="api-ref.html#cb45-4"></a>    PLATFORM_32K_RC             <span class="co">// Internal RC 32k clock</span></span>
<span id="cb45-5"><a href="api-ref.html#cb45-5"></a>} platform_32k_clk_src_t;</span></code></pre></div>
<p>When modifying this configuration, both RC32K and OSC32K should be <strong>enabled</strong> and <strong>run</strong>:</p>
<pre><code>  * For OSC32K, wait until status of OSC32K is OK;
  * For RC32K, wait 100us after enabled.</code></pre>
<p>Note: Wait another 100us before disabling the unused clock.</p></li>
<li><p><code>PLATFORM_CFG_32K_CLK_ACC</code>: Configure 32k clock accurary in ppm.</p></li>
<li><p><code>PLATFORM_CFG_32K_CALI_PERIOD</code>: 32K clock auto-calibartion period in seconds. Default: 3600 * 2 (2 hours).</p></li>
<li><p><code>PLATFORM_CFG_DEEP_SLEEP_TIME_REDUCTION</code>: Sleep time reduction (deep sleep mode) in micro seconds. Default: ~550us.</p></li>
<li><p><code>PLATFORM_CFG_SLEEP_TIME_REDUCTION</code>: Sleep time reduction (other sleep mode) in micro seconds. Default: ~450us.</p></li>
<li><p><code>PLATFORM_CFG_LL_DBG_FLAGS</code>: Link layer flags. Combination of bits in <code>ll_cfg_flag_t</code>.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="api-ref.html#cb47-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb47-2"><a href="api-ref.html#cb47-2"></a>{</span>
<span id="cb47-3"><a href="api-ref.html#cb47-3"></a>    LL_FLAG_DISABLE_CTE_PREPROCESSING = <span class="dv">1</span>,  <span class="co">// disable CTE processing</span></span>
<span id="cb47-4"><a href="api-ref.html#cb47-4"></a>    LL_FLAG_LEGACY_ONLY_INITIATING = <span class="dv">4</span>,     <span class="co">// initiating only using legacy ADV</span></span>
<span id="cb47-5"><a href="api-ref.html#cb47-5"></a>    LL_FLAG_LEGACY_ONLY_SCANNING = <span class="dv">8</span>,       <span class="co">// scanning only using legacy ADV</span></span>
<span id="cb47-6"><a href="api-ref.html#cb47-6"></a>} ll_cfg_flag_t;</span></code></pre></div></li>
<li><p><code>PLATFORM_CFG_LL_LEGACY_ADV_INTERVAL</code>: Link layer legacy advertising intervals for high duty cycle
(higher 16bits) and normal duty cycle (lower 16bits) in micro seconds. Default for high duty cycle: 1250;
default for normal duty cycle: 1500.</p></li>
</ul></li>
<li><p><code>const uint32_t flag</code></p>
<p>To disable or enable an item. It can be one
of following values:</p>
<ul>
<li><code>PLATFORM_CFG_ENABLE</code></li>
<li><code>PLATFORM_CFG_DISABLE</code></li>
</ul></li>
</ul>
</div>
<div id="return-value-2" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.3.3</span> Return Value<a href="api-ref.html#return-value-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-2" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.3.4</span> Remarks<a href="api-ref.html#remarks-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="example-2" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.3.5</span> Example<a href="api-ref.html#example-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="api-ref.html#cb48-1"></a><span class="co">// Enable HCI logging</span></span>
<span id="cb48-2"><a href="api-ref.html#cb48-2"></a>platform_config(PLATFORM_CFG_LOG_HCI, PLATFORM_CFG_ENABLE);</span></code></pre></div>
</div>
</div>
<div id="platform_get_heap_status" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.4</span> <code>platform_get_heap_status</code><a href="api-ref.html#platform_get_heap_status" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Get current heap status, such as available size, etc.</p>
<div id="prototype-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.4.1</span> Prototype<a href="api-ref.html#prototype-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="api-ref.html#cb49-1"></a><span class="dt">void</span> platform_get_heap_status(platform_heap_status_t *status);</span></code></pre></div>
</div>
<div id="parameters-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.4.2</span> Parameters<a href="api-ref.html#parameters-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>platform_heap_status_t *status</code></p>
<p>Heap status.</p></li>
</ul>
</div>
<div id="return-value-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.4.3</span> Return Value<a href="api-ref.html#return-value-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.4.4</span> Remarks<a href="api-ref.html#remarks-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Heap status is defined as:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="api-ref.html#cb50-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb50-2"><a href="api-ref.html#cb50-2"></a>{</span>
<span id="cb50-3"><a href="api-ref.html#cb50-3"></a>    <span class="dt">uint32_t</span> bytes_free;                <span class="co">// total free bytes</span></span>
<span id="cb50-4"><a href="api-ref.html#cb50-4"></a>    <span class="dt">uint32_t</span> bytes_minimum_ever_free;   <span class="co">// mininum of bytes_free from startup</span></span>
<span id="cb50-5"><a href="api-ref.html#cb50-5"></a>} platform_heap_status_t;</span></code></pre></div>
</div>
<div id="example-3" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.4.5</span> Example<a href="api-ref.html#example-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="api-ref.html#cb51-1"></a>platform_heap_status_t status;</span>
<span id="cb51-2"><a href="api-ref.html#cb51-2"></a>platform_get_heap_status(&amp;status);</span></code></pre></div>
</div>
</div>
<div id="platform_get_us_time" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.5</span> <code>platform_get_us_time</code><a href="api-ref.html#platform_get_us_time" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Read the internal timer counting from BLE initialization.</p>
<div id="prototype-4" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.5.1</span> Prototype<a href="api-ref.html#prototype-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="api-ref.html#cb52-1"></a><span class="dt">int64_t</span> platform_get_us_time(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters-4" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.5.2</span> Parameters<a href="api-ref.html#parameters-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value-4" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.5.3</span> Return Value<a href="api-ref.html#return-value-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Value of the internal timer counting at 1us.</p>
</div>
<div id="remarks-4" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.5.4</span> Remarks<a href="api-ref.html#remarks-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This timer restarts after shutdown, while RTC timer does not.</p>
</div>
<div id="example-4" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.5.5</span> Example<a href="api-ref.html#example-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="api-ref.html#cb53-1"></a>platform_get_us_time();</span></code></pre></div>
</div>
</div>
<div id="platform_get_version" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.6</span> <code>platform_get_version</code><a href="api-ref.html#platform_get_version" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Get version number of platform.</p>
<div id="prototype-5" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.6.1</span> Prototype<a href="api-ref.html#prototype-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="api-ref.html#cb54-1"></a><span class="dt">const</span> platform_ver_t *platform_get_version(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters-5" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.6.2</span> Parameters<a href="api-ref.html#parameters-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value-5" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.6.3</span> Return Value<a href="api-ref.html#return-value-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pointer to <code>platform_ver_t</code>.</p>
</div>
<div id="remarks-5" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.6.4</span> Remarks<a href="api-ref.html#remarks-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Platform version number has three parts, major, minor and patch:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="api-ref.html#cb55-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> platform_ver</span>
<span id="cb55-2"><a href="api-ref.html#cb55-2"></a>{</span>
<span id="cb55-3"><a href="api-ref.html#cb55-3"></a>    <span class="dt">unsigned</span> <span class="dt">short</span> major;</span>
<span id="cb55-4"><a href="api-ref.html#cb55-4"></a>    <span class="dt">char</span>  minor;</span>
<span id="cb55-5"><a href="api-ref.html#cb55-5"></a>    <span class="dt">char</span>  patch;</span>
<span id="cb55-6"><a href="api-ref.html#cb55-6"></a>} platform_ver_t;</span></code></pre></div>
</div>
<div id="example-5" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.6.5</span> Example<a href="api-ref.html#example-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="api-ref.html#cb56-1"></a><span class="dt">const</span> platform_ver_t *ver = platform_get_version();</span>
<span id="cb56-2"><a href="api-ref.html#cb56-2"></a>printf(<span class="st">&quot;Platform version: %d.%d.%d</span><span class="sc">\n</span><span class="st">&quot;</span>, ver-&gt;major, ver-&gt;minor, ver-&gt;patch);</span></code></pre></div>
</div>
</div>
<div id="platform_hrng" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.7</span> <code>platform_hrng</code><a href="api-ref.html#platform_hrng" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Generate random bytes by using hardware random-number generator.</p>
<div id="prototype-6" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.7.1</span> Prototype<a href="api-ref.html#prototype-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb57-1"><a href="api-ref.html#cb57-1"></a><span class="dt">void</span>  platform_hrng(<span class="dt">uint8_t</span> *bytes, <span class="dt">const</span> <span class="dt">uint32_t</span> len);</span></code></pre></div>
</div>
<div id="parameters-6" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.7.2</span> Parameters<a href="api-ref.html#parameters-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>uint8_t *bytes</code></p>
<p>Random data output.</p></li>
<li><p><code>const uint32_t len</code></p>
<p>Number of random bytes to be generated.</p></li>
</ul>
</div>
<div id="return-value-6" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.7.3</span> Return Value<a href="api-ref.html#return-value-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-6" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.7.4</span> Remarks<a href="api-ref.html#remarks-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Time consumption to generate a fix length of data is undetermined.</p>
</div>
<div id="example-6" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.7.5</span> Example<a href="api-ref.html#example-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="api-ref.html#cb58-1"></a><span class="dt">uint32_t</span> strong_random;</span>
<span id="cb58-2"><a href="api-ref.html#cb58-2"></a>platform_hrng(&amp;strong_random, <span class="kw">sizeof</span>(strong_random));</span></code></pre></div>
</div>
</div>
<div id="platform_install_isr_stack" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.8</span> <code>platform_install_isr_stack</code><a href="api-ref.html#platform_install_isr_stack" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Install a new stack for ISR.</p>
<div id="prototype-7" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.8.1</span> Prototype<a href="api-ref.html#prototype-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="api-ref.html#cb59-1"></a><span class="dt">void</span> platform_install_isr_stack(<span class="dt">void</span> *top);</span></code></pre></div>
</div>
<div id="parameters-7" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.8.2</span> Parameters<a href="api-ref.html#parameters-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>void *top</code></p>
<p>Top of the new stack, which must be 4-bytes aligned.</p></li>
</ul>
</div>
<div id="return-value-7" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.8.3</span> Return Value<a href="api-ref.html#return-value-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-7" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.8.4</span> Remarks<a href="api-ref.html#remarks-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In case apps need a much larger stack than the default one in ISR, a new stack can be
installed to replace the default one.</p>
<p>This function is only allowed to be called in <code>app_main</code>. The new stack is put into
use after <code>app_main</code> returns.</p>
</div>
<div id="example-7" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.8.5</span> Example<a href="api-ref.html#example-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="api-ref.html#cb60-1"></a><span class="dt">uint32_t</span> new_stack[<span class="dv">2048</span>];</span>
<span id="cb60-2"><a href="api-ref.html#cb60-2"></a>...</span>
<span id="cb60-3"><a href="api-ref.html#cb60-3"></a>platform_install_isr_stack(new_stack + <span class="kw">sizeof</span>(new_stack) / <span class="kw">sizeof</span>(new_stack[<span class="dv">0</span>]));</span></code></pre></div>
</div>
</div>
<div id="platform_printf" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.9</span> <code>platform_printf</code><a href="api-ref.html#platform_printf" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>printf</code> function stored in platform binary.</p>
<div id="prototype-8" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.9.1</span> Prototype<a href="api-ref.html#prototype-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb61-1"><a href="api-ref.html#cb61-1"></a> <span class="dt">void</span>  platform_printf(<span class="dt">const</span> <span class="dt">char</span> *format, ...);</span></code></pre></div>
</div>
<div id="parameters-8" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.9.2</span> Parameters<a href="api-ref.html#parameters-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const char *format</code></p>
<p>Format string.</p></li>
<li><p><code>...</code></p>
<p>Variable arguments for format string.</p></li>
</ul>
</div>
<div id="return-value-8" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.9.3</span> Return Value<a href="api-ref.html#return-value-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-8" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.9.4</span> Remarks<a href="api-ref.html#remarks-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are pros &amp; cons to use this function.</p>
<p>Pros:</p>
<ul>
<li>This function is located in platform binary, app binary size can be saved.</li>
</ul>
<p>Cons:</p>
<ul>
<li>Output is directed <code>PLATFORM_CB_EVT_PUTC</code> event, so its callback function must be defined.</li>
</ul>
</div>
<div id="example-8" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.9.5</span> Example<a href="api-ref.html#example-8" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="api-ref.html#cb62-1"></a>platform_printf(<span class="st">&quot;Hello world&quot;</span>);</span></code></pre></div>
</div>
</div>
<div id="platform_raise_assertion" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.10</span> <code>platform_raise_assertion</code><a href="api-ref.html#platform_raise_assertion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Raise a software assertion.</p>
<div id="prototype-9" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.10.1</span> Prototype<a href="api-ref.html#prototype-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="api-ref.html#cb63-1"></a><span class="dt">void</span>  platform_raise_assertion(<span class="dt">const</span> <span class="dt">char</span> *file_name, <span class="dt">int</span> line_no);</span></code></pre></div>
</div>
<div id="parameters-9" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.10.2</span> Parameters<a href="api-ref.html#parameters-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const char *file_name</code></p>
<p>File name where the assertion occurred.</p></li>
<li><p><code>int line_no</code></p>
<p>Line number where the assertion occurred.</p></li>
</ul>
</div>
<div id="return-value-9" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.10.3</span> Return Value<a href="api-ref.html#return-value-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-9" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.10.4</span> Remarks<a href="api-ref.html#remarks-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="example-9" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.10.5</span> Example<a href="api-ref.html#example-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="api-ref.html#cb64-1"></a>  <span class="cf">if</span> (NULL == ptr)</span>
<span id="cb64-2"><a href="api-ref.html#cb64-2"></a>    platform_raise_assertion(__FILE__, __LINE__);</span></code></pre></div>
</div>
</div>
<div id="platform_rand" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.11</span> <code>platform_rand</code><a href="api-ref.html#platform_rand" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Generate a pseudo random integer by internal PRNG.</p>
<div id="prototype-10" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.11.1</span> Prototype<a href="api-ref.html#prototype-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="api-ref.html#cb65-1"></a><span class="dt">int</span> platform_rand(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters-10" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.11.2</span> Parameters<a href="api-ref.html#parameters-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value-10" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.11.3</span> Return Value<a href="api-ref.html#return-value-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A pseudo random integer in range of 0 to RAND_MAX.</p>
</div>
<div id="remarks-10" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.11.4</span> Remarks<a href="api-ref.html#remarks-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Seed of the internal PRNG is initialized by HRNG at startup.</p>
</div>
<div id="example-10" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.11.5</span> Example<a href="api-ref.html#example-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="api-ref.html#cb66-1"></a>printf(<span class="st">&quot;rand: %d</span><span class="sc">\n</span><span class="st">&quot;</span>, platform_rand());</span></code></pre></div>
</div>
</div>
<div id="platform_read_info" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.12</span> <code>platform_read_info</code><a href="api-ref.html#platform_read_info" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Read platform information</p>
<div id="prototype-11" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.12.1</span> Prototype<a href="api-ref.html#prototype-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="api-ref.html#cb67-1"></a><span class="dt">uint32_t</span> platform_read_info(<span class="dt">const</span> platform_info_item_t item);</span></code></pre></div>
</div>
<div id="parameters-11" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.12.2</span> Parameters<a href="api-ref.html#parameters-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const platform_info_item_t item</code></p>
<p>Information item.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="api-ref.html#cb68-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb68-2"><a href="api-ref.html#cb68-2"></a>{</span>
<span id="cb68-3"><a href="api-ref.html#cb68-3"></a>    PLATFORM_INFO_OSC32K_STATUS,     <span class="co">// Read status of 32k crystal oscillator.</span></span>
<span id="cb68-4"><a href="api-ref.html#cb68-4"></a>                                     <span class="co">// Value 0: not OK; Non-0: OK</span></span>
<span id="cb68-5"><a href="api-ref.html#cb68-5"></a>} platform_info_item_t;</span></code></pre></div></li>
</ul>
</div>
<div id="return-value-11" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.12.3</span> Return Value<a href="api-ref.html#return-value-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Value of the information item.</p>
</div>
<div id="remarks-11" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.12.4</span> Remarks<a href="api-ref.html#remarks-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="example-11" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.12.5</span> Example<a href="api-ref.html#example-11" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="api-ref.html#cb69-1"></a>platform_read_info(PLATFORM_INFO_OSC32K_STATUS);</span></code></pre></div>
</div>
</div>
<div id="platform_read_persistent_reg" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.13</span> <code>platform_read_persistent_reg</code><a href="api-ref.html#platform_read_persistent_reg" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Read value from the persistent register. See also
<a href="api-ref.html#platform_write_persistent_reg"><code>platform_write_persistent_reg</code></a>.</p>
<div id="prototype-12" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.13.1</span> Prototype<a href="api-ref.html#prototype-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="api-ref.html#cb70-1"></a><span class="dt">uint32_t</span> platform_read_persistent_reg(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters-12" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.13.2</span> Parameters<a href="api-ref.html#parameters-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value-12" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.13.3</span> Return Value<a href="api-ref.html#return-value-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The **four* bits value writen by
<a href="api-ref.html#platform_write_persistent_reg"><code>platform_write_persistent_reg</code></a>.</p>
</div>
<div id="remarks-12" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.13.4</span> Remarks<a href="api-ref.html#remarks-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="example-12" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.13.5</span> Example<a href="api-ref.html#example-12" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="api-ref.html#cb71-1"></a>platform_read_persistent_reg();</span></code></pre></div>
</div>
</div>
<div id="platform_reset" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.14</span> <code>platform_reset</code><a href="api-ref.html#platform_reset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Reset platform (SoC).</p>
<div id="prototype-13" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.14.1</span> Prototype<a href="api-ref.html#prototype-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="api-ref.html#cb72-1"></a><span class="dt">void</span> platform_reset(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="parameters-13" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.14.2</span> Parameters<a href="api-ref.html#parameters-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="return-value-13" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.14.3</span> Return Value<a href="api-ref.html#return-value-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-13" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.14.4</span> Remarks<a href="api-ref.html#remarks-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When calling this function, the code after it will not be executed.</p>
</div>
<div id="example-13" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.14.5</span> Example<a href="api-ref.html#example-13" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="api-ref.html#cb73-1"></a>  <span class="cf">if</span> (out-of-memory)</span>
<span id="cb73-2"><a href="api-ref.html#cb73-2"></a>    platform_reset();</span></code></pre></div>
</div>
</div>
<div id="platform_set_evt_callback" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.15</span> <code>platform_set_evt_callback</code><a href="api-ref.html#platform_set_evt_callback" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Registers callback functions to platform events.</p>
<div id="prototype-14" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.15.1</span> Prototype<a href="api-ref.html#prototype-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="api-ref.html#cb74-1"></a><span class="dt">void</span> platform_set_evt_callback(platform_evt_callback_type_t type, </span>
<span id="cb74-2"><a href="api-ref.html#cb74-2"></a>                               f_platform_evt_cb f, </span>
<span id="cb74-3"><a href="api-ref.html#cb74-3"></a>                               <span class="dt">void</span> *user_data);</span></code></pre></div>
</div>
<div id="parameters-14" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.15.2</span> Parameters<a href="api-ref.html#parameters-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>platform_evt_callback_type_t type</code></p>
<p>Specify the event type to which the callback function is registered. It can be one
of following values:</p>
<ul>
<li><p><code>PLATFORM_CB_EVT_PUTC</code>: Ouput ASCII character event</p>
<p>When platform want to output ASCII characters for logging, this event
is fired. Parameter <code>void *data</code> passed into the callback function is casted from
<code>char *</code>.</p>
<p><code>ingWizard</code> can automatically generate code that redirects platform log to UART if
<code>Print to UART</code> is checked on <code>Common Function</code> when creating a new project.</p></li>
<li><p><code>PLATFORM_CB_EVT_PROFILE_INIT</code>: Profile initialization event</p>
<p>When host initializes, this event is fired to request app to initialize GATT profile.</p>
<p><code>ingWizard</code> can automatically generate code for this event when creating a new project.</p></li>
<li><p><code>PLATFORM_CB_EVT_ON_DEEP_SLEEP_WAKEUP</code>: Wakeup from deep sleep event</p>
<p>When waking up from deep sleep, this event is fired. During deep sleep, peripheral
interfaces (such as UART, I2C, etc) are all powered off. So, when waking up, these
interfaces might need to be re-initialized.</p>
<p><code>ingWizard</code> can automatically generate code for event if
<code>Deep Sleep</code> is checked on <code>Common Function</code> when creating a new project.</p></li>
<li><p><code>PLATFORM_CB_EVT_QUERY_DEEP_SLEEP_ALLOWED</code>: Query if deep sleep is allowed event</p>
<p>When platform prepares to enter deep sleep mode, this event is fired to query app
if deep sleep is allow at this moment. Callback function can reject deep sleep
by returning <code>0</code>, and allow it by returning a non-<code>0</code> value.</p>
<p><code>ingWizard</code> can automatically generate code for event if
<code>Deep Sleep</code> is checked on <code>Common Function</code> when creating a new project.</p></li>
<li><p><code>PLATFORM_CB_EVT_HARD_FAULT</code>: Hard fault occurs</p>
<p>When hard fault occurs, this event is fired. Parameter <code>void *data</code>
passed into the callback function is casted from <code>hard_fault_info_t *</code>.
If this callback is not defined, CPU enters a dead loop when hard fault occurs.</p></li>
<li><p><code>PLATFORM_CB_EVT_ASSERTION</code>: Software assertion fails</p>
<p>When software assertion fails, this event is fired. Parameter <code>void *data</code>
passed into the callback function is casted from <code>assertion_info_t *</code>.
If this callback is not defined, CPU enters a dead loop when assertion occurs.</p></li>
<li><p><code>PLATFORM_CB_EVT_LLE_INIT</code>: Link layer engine initialized.</p>
<p>When link layer engine initialized, this event is fired.</p></li>
<li><p><code>PLATFORM_CB_EVT_HEAP_OOM</code>: Out of memory.</p>
<p>When allocation on heap fails (heap out of memory), this event is fired.
If this event is fired and no callback is defined, CPU enters a dead loop.</p></li>
<li><p><code>PLATFORM_CB_EVT_TRACE</code>: Trace output.</p>
<p>When a trace item is emitted, this event is fired. Apps can define a callback
function for this event to save or log trace output. <code>param</code> to the callback
is casted from <code>platform_trace_evt_t *</code> (See <a href="dive-into-sdk.html#debugging-tracing">Debugging &amp; Tracing</a>).</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="api-ref.html#cb75-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb75-2"><a href="api-ref.html#cb75-2"></a>{</span>
<span id="cb75-3"><a href="api-ref.html#cb75-3"></a>    <span class="dt">const</span> <span class="dt">void</span> *data1;</span>
<span id="cb75-4"><a href="api-ref.html#cb75-4"></a>    <span class="dt">const</span> <span class="dt">void</span> *data2;</span>
<span id="cb75-5"><a href="api-ref.html#cb75-5"></a>    <span class="dt">uint16_t</span> len1;</span>
<span id="cb75-6"><a href="api-ref.html#cb75-6"></a>    <span class="dt">uint16_t</span> len2;</span>
<span id="cb75-7"><a href="api-ref.html#cb75-7"></a>} platform_evt_trace_t;</span></code></pre></div>
<p>A trace item is a combination of <code>data1</code> and <code>data2</code>. Note:</p>
<ol style="list-style-type: decimal">
<li><p><code>len1</code> or <code>len2</code> might be 0, but not both;</p></li>
<li><p>If callback function finds that it can’t output data of size
<code>len1</code> + <code>len2</code>, then, both <code>data1</code> &amp; <code>data2</code> should be discarded to avoid
trace item corruption.</p></li>
</ol></li>
</ul></li>
<li><p><code>f_platform_evt_cb f</code></p>
<p>The callback function registered to event <code>type</code>. <code>f_platform_evt_cb</code> is:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="api-ref.html#cb76-1"></a><span class="kw">typedef</span> <span class="dt">uint32_t</span> (*f_platform_evt_cb)(<span class="dt">void</span> *data, <span class="dt">void</span> *user_data);</span></code></pre></div></li>
<li><p><code>void *user_data</code></p>
<p>This is passed to callback function’s <code>user_data</code> unchanged.</p></li>
</ul>
</div>
<div id="return-value-14" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.15.3</span> Return Value<a href="api-ref.html#return-value-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-14" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.15.4</span> Remarks<a href="api-ref.html#remarks-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is not required to register callback functions to each event.</p>
<p>If no callback function is registered to <code>PLATFORM_CB_EVT_PUTC</code> event, all platform log is
discarded.</p>
<p>If no callback function is registered to <code>PLATFORM_CB_EVT_PROFILE_INIT</code> event, BLE device’s
profile is empty.</p>
<p>If no callback function is registered to <code>PLATFORM_CB_EVT_ON_DEEP_SLEEP_WAKEUP</code> event, app
will not be notified when waking up from deep sleep.</p>
<p>If no callback function is registered to <code>PLATFORM_CB_EVT_QUERY_DEEP_SLEEP_ALLOWED</code> event,
deep sleep is <em>disabled</em>.</p>
</div>
<div id="example-14" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.15.5</span> Example<a href="api-ref.html#example-14" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="api-ref.html#cb77-1"></a><span class="dt">uint32_t</span> cb_putc(<span class="dt">char</span> *c, <span class="dt">void</span> *dummy)</span>
<span id="cb77-2"><a href="api-ref.html#cb77-2"></a>{</span>
<span id="cb77-3"><a href="api-ref.html#cb77-3"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: output char c to UART</span></span>
<span id="cb77-4"><a href="api-ref.html#cb77-4"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb77-5"><a href="api-ref.html#cb77-5"></a>}</span>
<span id="cb77-6"><a href="api-ref.html#cb77-6"></a></span>
<span id="cb77-7"><a href="api-ref.html#cb77-7"></a>......</span>
<span id="cb77-8"><a href="api-ref.html#cb77-8"></a></span>
<span id="cb77-9"><a href="api-ref.html#cb77-9"></a>platform_set_evt_callback(PLATFORM_CB_EVT_PUTC, (f_platform_evt_cb)cb_putc, </span>
<span id="cb77-10"><a href="api-ref.html#cb77-10"></a>                          NULL);</span></code></pre></div>
</div>
</div>
<div id="platform_set_irq_callback" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.16</span> <code>platform_set_irq_callback</code><a href="api-ref.html#platform_set_irq_callback" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Registers callback functions to interrupt requests.</p>
<p>Developers do not need to define IRQ handlers in apps, but use callback functions instead. There
are 11 such IRQs, summarized in Table <a href="api-ref.html#tab:ch4-irq-summary">6.1</a>.</p>
<table>
<caption><span id="tab:ch4-irq-summary">Table 6.1: </span> IRQ Summary</caption>
<thead>
<tr class="header">
<th align="center">Peripheral Type</th>
<th align="center">Number</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">RTC</td>
<td align="center">1</td>
<td align="left">Real Time Clock</td>
</tr>
<tr class="even">
<td align="center">TIMER</td>
<td align="center">3</td>
<td align="left">Timer</td>
</tr>
<tr class="odd">
<td align="center">GPIO</td>
<td align="center">1</td>
<td align="left">General Purpose Input/Output</td>
</tr>
<tr class="even">
<td align="center">SPI</td>
<td align="center">2</td>
<td align="left">Serial Peripheral Interface</td>
</tr>
<tr class="odd">
<td align="center">UART</td>
<td align="center">2</td>
<td align="left">Universal Asynchronous Receiver-Transmitter</td>
</tr>
<tr class="even">
<td align="center">I2C</td>
<td align="center">2</td>
<td align="left">Inter-Integrated Circuit</td>
</tr>
</tbody>
</table>
<div id="prototype-15" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.16.1</span> Prototype<a href="api-ref.html#prototype-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="api-ref.html#cb78-1"></a><span class="dt">void</span> platform_set_irq_callback(platform_irq_callback_type_t type,</span>
<span id="cb78-2"><a href="api-ref.html#cb78-2"></a>                               f_platform_irq_cb f, </span>
<span id="cb78-3"><a href="api-ref.html#cb78-3"></a>                               <span class="dt">void</span> *user_data);</span></code></pre></div>
</div>
<div id="parameters-15" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.16.2</span> Parameters<a href="api-ref.html#parameters-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>platform_irq_callback_type_t type</code></p>
<p>Specify the IRQ type to which the callback function is registered. It can be one
of following values:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="api-ref.html#cb79-1"></a>PLATFORM_CB_IRQ_RTC,</span>
<span id="cb79-2"><a href="api-ref.html#cb79-2"></a>PLATFORM_CB_IRQ_TIMER0,</span>
<span id="cb79-3"><a href="api-ref.html#cb79-3"></a>PLATFORM_CB_IRQ_TIMER1,</span>
<span id="cb79-4"><a href="api-ref.html#cb79-4"></a>PLATFORM_CB_IRQ_TIMER2,</span>
<span id="cb79-5"><a href="api-ref.html#cb79-5"></a>PLATFORM_CB_IRQ_GPIO,</span>
<span id="cb79-6"><a href="api-ref.html#cb79-6"></a>PLATFORM_CB_IRQ_SPI0,</span>
<span id="cb79-7"><a href="api-ref.html#cb79-7"></a>PLATFORM_CB_IRQ_SPI1,</span>
<span id="cb79-8"><a href="api-ref.html#cb79-8"></a>PLATFORM_CB_IRQ_UART0,</span>
<span id="cb79-9"><a href="api-ref.html#cb79-9"></a>PLATFORM_CB_IRQ_UART1,</span>
<span id="cb79-10"><a href="api-ref.html#cb79-10"></a>PLATFORM_CB_IRQ_I2C0,</span>
<span id="cb79-11"><a href="api-ref.html#cb79-11"></a>PLATFORM_CB_IRQ_I2C1</span></code></pre></div></li>
<li><p><code>f_platform_irq_cb f</code></p>
<p>The callback function registered to IRQ <code>type</code>. <code>f_platform_irq_cb</code> is:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="api-ref.html#cb80-1"></a><span class="kw">typedef</span> <span class="dt">uint32_t</span> (*f_platform_irq_cb)(<span class="dt">void</span> *user_data);</span></code></pre></div></li>
<li><p><code>void *user_data</code></p>
<p>This is passed to callback function’s <code>user_data</code> unchanged.</p></li>
</ul>
</div>
<div id="return-value-15" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.16.3</span> Return Value<a href="api-ref.html#return-value-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-15" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.16.4</span> Remarks<a href="api-ref.html#remarks-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When a callback function is registered to an IRQ, the IRQ is enabled automatically.</p>
</div>
<div id="example-15" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.16.5</span> Example<a href="api-ref.html#example-15" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="api-ref.html#cb81-1"></a><span class="dt">uint32_t</span> cb_irq_uart0(<span class="dt">void</span> *dummy)</span>
<span id="cb81-2"><a href="api-ref.html#cb81-2"></a>{</span>
<span id="cb81-3"><a href="api-ref.html#cb81-3"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: add UART0 IRQ handling code</span></span>
<span id="cb81-4"><a href="api-ref.html#cb81-4"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb81-5"><a href="api-ref.html#cb81-5"></a>}</span>
<span id="cb81-6"><a href="api-ref.html#cb81-6"></a></span>
<span id="cb81-7"><a href="api-ref.html#cb81-7"></a>......</span>
<span id="cb81-8"><a href="api-ref.html#cb81-8"></a></span>
<span id="cb81-9"><a href="api-ref.html#cb81-9"></a>platform_set_irq_callback(PLATFORM_CB_IRQ_UART0, cb_irq_uart0, </span>
<span id="cb81-10"><a href="api-ref.html#cb81-10"></a>                          NULL);</span></code></pre></div>
</div>
</div>
<div id="platform_shutdown" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.17</span> <code>platform_shutdown</code><a href="api-ref.html#platform_shutdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Bring the whole system into shutdown state, and reboot after a specified duration. Optionally,
a portion of memory can be retentioned during shutdown, and apps can continue to use it after
reboot.</p>
<p>Note that this function will NOT return except that shutdown procedure fails to initiate.
Possible causes for failures include:</p>
<ol style="list-style-type: decimal">
<li>External wake-up signal is issued;</li>
<li>Input parameters are not proper;</li>
<li>Internal components are busy.</li>
</ol>
<div id="prototype-16" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.17.1</span> Prototype<a href="api-ref.html#prototype-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="api-ref.html#cb82-1"></a><span class="dt">void</span> platform_shutdown(<span class="dt">const</span> <span class="dt">uint32_t</span> duration_cycles, </span>
<span id="cb82-2"><a href="api-ref.html#cb82-2"></a>                       <span class="dt">const</span> <span class="dt">void</span> *p_retention_data,</span>
<span id="cb82-3"><a href="api-ref.html#cb82-3"></a>                       <span class="dt">const</span> <span class="dt">uint32_t</span> data_size);</span></code></pre></div>
</div>
<div id="parameters-16" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.17.2</span> Parameters<a href="api-ref.html#parameters-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const uint32_t duration_cycles</code></p>
<p>Duration (measured in cycles of 32k clock) before power on again (reboot).
The minimum duration is 825 cycles (about 25.18ms). If <code>0</code> is used, the system
will stay in shutdown state until external wake-up signal is issued.</p></li>
<li><p><code>const void *p_retention_data</code></p>
<p>Pointer to the start of data to be retentioned. Only data within SYSTEM memory can be retentioned.
This parameter can be set to <code>NULL</code> when <code>data_size</code> is <code>0</code>.</p></li>
<li><p><code>data_size</code></p>
<p>Size of the data to be retentioned. Set to <code>0</code> when memory retention is not needed.</p></li>
</ul>
</div>
<div id="return-value-16" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.17.3</span> Return Value<a href="api-ref.html#return-value-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-16" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.17.4</span> Remarks<a href="api-ref.html#remarks-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="example-16" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.17.5</span> Example<a href="api-ref.html#example-16" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="api-ref.html#cb83-1"></a><span class="co">// Shutdown the system and reboot after 1s.</span></span>
<span id="cb83-2"><a href="api-ref.html#cb83-2"></a>platform_shutdown(<span class="dv">32768</span>, NULL, <span class="dv">0</span>);</span></code></pre></div>
</div>
</div>
<div id="api-switch-app" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.18</span> <code>platform_switch_app</code><a href="api-ref.html#api-switch-app" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Switch to a secondary app.</p>
<div id="prototype-17" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.18.1</span> Prototype<a href="api-ref.html#prototype-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="api-ref.html#cb84-1"></a><span class="dt">void</span> platform_switch_app(<span class="dt">const</span> <span class="dt">uint32_t</span> app_addr);</span></code></pre></div>
</div>
<div id="parameters-17" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.18.2</span> Parameters<a href="api-ref.html#parameters-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const uint32_t app_addr</code></p>
<p>Entry address of the secondary app.</p></li>
</ul>
</div>
<div id="return-value-17" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.18.3</span> Return Value<a href="api-ref.html#return-value-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-17" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.18.4</span> Remarks<a href="api-ref.html#remarks-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When calling this function, the code after it will not be executed.</p>
</div>
<div id="example-17" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.18.5</span> Example<a href="api-ref.html#example-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="api-ref.html#cb85-1"></a>platform_switch_app(<span class="bn">0x80000</span>);</span></code></pre></div>
</div>
</div>
<div id="platform_write_persistent_reg" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.19</span> <code>platform_write_persistent_reg</code><a href="api-ref.html#platform_write_persistent_reg" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Write a value to the persistent register.
This value is kept even in power saving, shutdown mode, or when switching to another app.</p>
<div id="prototype-18" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.19.1</span> Prototype<a href="api-ref.html#prototype-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="api-ref.html#cb86-1"></a><span class="dt">void</span> platform_write_persistent_reg(<span class="dt">const</span> <span class="dt">uint8_t</span> value);</span></code></pre></div>
</div>
<div id="parameters-18" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.19.2</span> Parameters<a href="api-ref.html#parameters-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const uint8_t value</code></p>
<p>The value.</p></li>
</ul>
</div>
<div id="return-value-18" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.19.3</span> Return Value<a href="api-ref.html#return-value-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-18" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.19.4</span> Remarks<a href="api-ref.html#remarks-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Only <strong>four</strong> bits are saved.</p>
</div>
<div id="example-18" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.19.5</span> Example<a href="api-ref.html#example-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="api-ref.html#cb87-1"></a>platform_write_persistent_reg(<span class="dv">1</span>);</span></code></pre></div>
</div>
</div>
<div id="syssetpublicdeviceaddr" class="section level2 hasAnchor">
<h2><span class="header-section-number">6.20</span> <code>sysSetPublicDeviceAddr</code><a href="api-ref.html#syssetpublicdeviceaddr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Set the public address of device.</p>
<p>The public address of a BLE device is a 48-bit extended unique identifier
(EUI-48) created in accordance with the
IEEE 802-2014 standard<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a>.</p>

<div class="rmdcaution">
<em>INGCHIPS</em> 918xx <em>DO NOT</em> have public addresses.
This function should <em>ONLY</em> be used for debugging or testing,
and <em>NEVER</em> be used in final products.
</div>

<div id="prototype-19" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.20.1</span> Prototype<a href="api-ref.html#prototype-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="api-ref.html#cb88-1"></a><span class="dt">void</span> sysSetPublicDeviceAddr(<span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> *addr);</span></code></pre></div>
</div>
<div id="parameters-19" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.20.2</span> Parameters<a href="api-ref.html#parameters-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><code>const unsigned char *addr</code></p>
<p>New public address.</p></li>
</ul>
</div>
<div id="return-value-19" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.20.3</span> Return Value<a href="api-ref.html#return-value-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Void.</p>
</div>
<div id="remarks-19" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.20.4</span> Remarks<a href="api-ref.html#remarks-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In order to avoid potential issues, this function should be called before calling
any GAP functions.
It is recommended to call this function in <code>app_main</code> or <code>PLATFORM_CB_EVT_PROFILE_INIT</code>
event callback function.</p>
</div>
<div id="example-19" class="section level3 hasAnchor">
<h3><span class="header-section-number">6.20.5</span> Example<a href="api-ref.html#example-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="api-ref.html#cb89-1"></a><span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> pub_addr[] = {<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>};</span>
<span id="cb89-2"><a href="api-ref.html#cb89-2"></a>sysSetPublicDeviceAddr(pub_addr);</span></code></pre></div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="18">
<li id="fn18"><p><a href="http://standards.ieee.org/findstds/standard/802-2014.html" class="uri">http://standards.ieee.org/findstds/standard/802-2014.html</a><a href="api-ref.html#fnref18" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dive-into-sdk.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="revision-history.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["user_guide.pdf", "user_guide.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
