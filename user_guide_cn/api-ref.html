<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Platform API 参考 | INGCHIPS SDK 开发者用户手册</title>
  <meta name="description" content="本文是 INGCHIPS SDK 的开发者用户手册。" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Platform API 参考 | INGCHIPS SDK 开发者用户手册" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="./img/sdk_overview.png" />
  <meta property="og:description" content="本文是 INGCHIPS SDK 的开发者用户手册。" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Platform API 参考 | INGCHIPS SDK 开发者用户手册" />
  
  <meta name="twitter:description" content="本文是 INGCHIPS SDK 的开发者用户手册。" />
  <meta name="twitter:image" content="./img/sdk_overview.png" />

<meta name="author" content="v1.2.6" />


<meta name="date" content="2022-01-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dive-into-sdk.html"/>
<link rel="next" href="revision-history.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">User Guide</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 欢迎</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> 简介</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#范围"><i class="fa fa-check"></i><b>2.1</b> 范围</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#架构"><i class="fa fa-check"></i><b>2.2</b> 架构</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#rtos-软件包"><i class="fa fa-check"></i><b>2.2.1</b> RTOS 软件包</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro.html"><a href="intro.html#noos-软件包"><i class="fa fa-check"></i><b>2.2.2</b> “NoOS” 软件包</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#缩略语和术语"><i class="fa fa-check"></i><b>2.3</b> 缩略语和术语</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#参考资料"><i class="fa fa-check"></i><b>2.4</b> 参考资料</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tutorial.html"><a href="tutorial.html"><i class="fa fa-check"></i><b>3</b> 教程</a><ul>
<li class="chapter" data-level="3.1" data-path="tutorial.html"><a href="tutorial.html#ch1-hello-world"><i class="fa fa-check"></i><b>3.1</b> 世界你好</a><ul>
<li class="chapter" data-level="3.1.1" data-path="tutorial.html"><a href="tutorial.html#development-tool-页面"><i class="fa fa-check"></i><b>3.1.1</b> <code>Development Tool</code> 页面</a></li>
<li class="chapter" data-level="3.1.2" data-path="tutorial.html"><a href="tutorial.html#choose-chip-series-页面"><i class="fa fa-check"></i><b>3.1.2</b> <code>Choose Chip Series</code> 页面</a></li>
<li class="chapter" data-level="3.1.3" data-path="tutorial.html"><a href="tutorial.html#choose-project-type-页面"><i class="fa fa-check"></i><b>3.1.3</b> <code>Choose Project Type</code> 页面</a></li>
<li class="chapter" data-level="3.1.4" data-path="tutorial.html"><a href="tutorial.html#role-of-your-device-页面"><i class="fa fa-check"></i><b>3.1.4</b> <code>Role of Your Device</code> 页面</a></li>
<li class="chapter" data-level="3.1.5" data-path="tutorial.html"><a href="tutorial.html#peripheral-setup-页面"><i class="fa fa-check"></i><b>3.1.5</b> <code>Peripheral Setup</code> 页面</a></li>
<li class="chapter" data-level="3.1.6" data-path="tutorial.html"><a href="tutorial.html#security-privacy-页面"><i class="fa fa-check"></i><b>3.1.6</b> <code>Security &amp; Privacy</code> 页面</a></li>
<li class="chapter" data-level="3.1.7" data-path="tutorial.html"><a href="tutorial.html#firmare-over-the-air-页面"><i class="fa fa-check"></i><b>3.1.7</b> <code>Firmare Over-The-Air</code> 页面</a></li>
<li class="chapter" data-level="3.1.8" data-path="tutorial.html"><a href="tutorial.html#common-functions-页面"><i class="fa fa-check"></i><b>3.1.8</b> <code>Common Functions</code> 页面</a></li>
<li class="chapter" data-level="3.1.9" data-path="tutorial.html"><a href="tutorial.html#编译您的项目"><i class="fa fa-check"></i><b>3.1.9</b> 编译您的项目</a></li>
<li class="chapter" data-level="3.1.10" data-path="tutorial.html"><a href="tutorial.html#下载"><i class="fa fa-check"></i><b>3.1.10</b> 下载</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="tutorial.html"><a href="tutorial.html#ibeacon"><i class="fa fa-check"></i><b>3.2</b> iBeacon</a><ul>
<li class="chapter" data-level="3.2.1" data-path="tutorial.html"><a href="tutorial.html#建立广播数据"><i class="fa fa-check"></i><b>3.2.1</b> 建立广播数据</a></li>
<li class="chapter" data-level="3.2.2" data-path="tutorial.html"><a href="tutorial.html#尝试应用"><i class="fa fa-check"></i><b>3.2.2</b> 尝试应用</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tutorial.html"><a href="tutorial.html#温度计"><i class="fa fa-check"></i><b>3.3</b> 温度计</a><ul>
<li class="chapter" data-level="3.3.1" data-path="tutorial.html"><a href="tutorial.html#建立广播数据-1"><i class="fa fa-check"></i><b>3.3.1</b> 建立广播数据</a></li>
<li class="chapter" data-level="3.3.2" data-path="tutorial.html"><a href="tutorial.html#建立gatt配置文件"><i class="fa fa-check"></i><b>3.3.2</b> 建立GATT配置文件</a></li>
<li class="chapter" data-level="3.3.3" data-path="tutorial.html"><a href="tutorial.html#代码编写"><i class="fa fa-check"></i><b>3.3.3</b> 代码编写</a></li>
<li class="chapter" data-level="3.3.4" data-path="tutorial.html"><a href="tutorial.html#通知"><i class="fa fa-check"></i><b>3.3.4</b> 通知</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tutorial.html"><a href="tutorial.html#fota温度计"><i class="fa fa-check"></i><b>3.4</b> FOTA温度计</a><ul>
<li class="chapter" data-level="3.4.1" data-path="tutorial.html"><a href="tutorial.html#fota设备"><i class="fa fa-check"></i><b>3.4.1</b> FOTA设备</a></li>
<li class="chapter" data-level="3.4.2" data-path="tutorial.html"><a href="tutorial.html#创建一个新版本"><i class="fa fa-check"></i><b>3.4.2</b> 创建一个新版本</a></li>
<li class="chapter" data-level="3.4.3" data-path="tutorial.html"><a href="tutorial.html#fota服务器"><i class="fa fa-check"></i><b>3.4.3</b> FOTA服务器</a></li>
<li class="chapter" data-level="3.4.4" data-path="tutorial.html"><a href="tutorial.html#尝试应用-1"><i class="fa fa-check"></i><b>3.4.4</b> 尝试应用</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="tutorial.html"><a href="tutorial.html#ibeacon扫描设备"><i class="fa fa-check"></i><b>3.5</b> iBeacon扫描设备</a><ul>
<li class="chapter" data-level="3.5.1" data-path="tutorial.html"><a href="tutorial.html#估算距离"><i class="fa fa-check"></i><b>3.5.1</b> 估算距离</a></li>
<li class="chapter" data-level="3.5.2" data-path="tutorial.html"><a href="tutorial.html#并发广播扫描"><i class="fa fa-check"></i><b>3.5.2</b> 并发广播&amp;扫描</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tutorial.html"><a href="tutorial.html#通知指示"><i class="fa fa-check"></i><b>3.6</b> 通知&amp;指示</a><ul>
<li class="chapter" data-level="3.6.1" data-path="tutorial.html"><a href="tutorial.html#inter-task-comm"><i class="fa fa-check"></i><b>3.6.1</b> 任务间通信</a></li>
<li class="chapter" data-level="3.6.2" data-path="tutorial.html"><a href="tutorial.html#定时器"><i class="fa fa-check"></i><b>3.6.2</b> 定时器</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="tutorial.html"><a href="tutorial.html#吞吐量"><i class="fa fa-check"></i><b>3.7</b> 吞吐量</a><ul>
<li class="chapter" data-level="3.7.1" data-path="tutorial.html"><a href="tutorial.html#理论峰值吞吐量"><i class="fa fa-check"></i><b>3.7.1</b> 理论峰值吞吐量</a></li>
<li class="chapter" data-level="3.7.2" data-path="tutorial.html"><a href="tutorial.html#测试吞吐量"><i class="fa fa-check"></i><b>3.7.2</b> 测试吞吐量</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="tutorial.html"><a href="tutorial.html#双角色-ble网关"><i class="fa fa-check"></i><b>3.8</b> 双角色 &amp; BLE网关</a><ul>
<li class="chapter" data-level="3.8.1" data-path="tutorial.html"><a href="tutorial.html#用-ingwizard-创建一个外设app"><i class="fa fa-check"></i><b>3.8.1</b> 用 <code>ingWizard</code> 创建一个外设APP</a></li>
<li class="chapter" data-level="3.8.2" data-path="tutorial.html"><a href="tutorial.html#定义温度计数据"><i class="fa fa-check"></i><b>3.8.2</b> 定义温度计数据</a></li>
<li class="chapter" data-level="3.8.3" data-path="tutorial.html"><a href="tutorial.html#扫描温度计"><i class="fa fa-check"></i><b>3.8.3</b> 扫描温度计</a></li>
<li class="chapter" data-level="3.8.4" data-path="tutorial.html"><a href="tutorial.html#发现服务"><i class="fa fa-check"></i><b>3.8.4</b> 发现服务</a></li>
<li class="chapter" data-level="3.8.5" data-path="tutorial.html"><a href="tutorial.html#数据处理"><i class="fa fa-check"></i><b>3.8.5</b> 数据处理</a></li>
<li class="chapter" data-level="3.8.6" data-path="tutorial.html"><a href="tutorial.html#鲁棒性"><i class="fa fa-check"></i><b>3.8.6</b> 鲁棒性</a></li>
<li class="chapter" data-level="3.8.7" data-path="tutorial.html"><a href="tutorial.html#准备温度计"><i class="fa fa-check"></i><b>3.8.7</b> 准备温度计</a></li>
<li class="chapter" data-level="3.8.8" data-path="tutorial.html"><a href="tutorial.html#测试"><i class="fa fa-check"></i><b>3.8.8</b> 测试</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="tutorial.html"><a href="tutorial.html#hello-nim"><i class="fa fa-check"></i><b>3.9</b> Hello, Nim</a><ul>
<li class="chapter" data-level="3.9.1" data-path="tutorial.html"><a href="tutorial.html#创建一个-nim-app"><i class="fa fa-check"></i><b>3.9.1</b> 创建一个 <code>Nim</code> APP</a></li>
<li class="chapter" data-level="3.9.2" data-path="tutorial.html"><a href="tutorial.html#创建广播数据"><i class="fa fa-check"></i><b>3.9.2</b> 创建广播数据</a></li>
<li class="chapter" data-level="3.9.3" data-path="tutorial.html"><a href="tutorial.html#创建配置数据"><i class="fa fa-check"></i><b>3.9.3</b> 创建配置数据</a></li>
<li class="chapter" data-level="3.9.4" data-path="tutorial.html"><a href="tutorial.html#使用-nim-的好处"><i class="fa fa-check"></i><b>3.9.4</b> 使用 <code>Nim</code> 的好处</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="core-tools.html"><a href="core-tools.html"><i class="fa fa-check"></i><b>4</b> 核心工具</a><ul>
<li class="chapter" data-level="4.1" data-path="core-tools.html"><a href="core-tools.html#向导"><i class="fa fa-check"></i><b>4.1</b> 向导</a></li>
<li class="chapter" data-level="4.2" data-path="core-tools.html"><a href="core-tools.html#ch2-downloader"><i class="fa fa-check"></i><b>4.2</b> 下载器</a><ul>
<li class="chapter" data-level="4.2.1" data-path="core-tools.html"><a href="core-tools.html#介绍"><i class="fa fa-check"></i><b>4.2.1</b> 介绍</a></li>
<li class="chapter" data-level="4.2.2" data-path="core-tools.html"><a href="core-tools.html#script-mass-prod"><i class="fa fa-check"></i><b>4.2.2</b> 脚本与量产</a></li>
<li class="chapter" data-level="4.2.3" data-path="core-tools.html"><a href="core-tools.html#flash-读保护适用于-ing918xx"><i class="fa fa-check"></i><b>4.2.3</b> Flash 读保护（适用于 ING918xx）</a></li>
<li class="chapter" data-level="4.2.4" data-path="core-tools.html"><a href="core-tools.html#python-版本"><i class="fa fa-check"></i><b>4.2.4</b> Python 版本</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="core-tools.html"><a href="core-tools.html#ingtracer"><i class="fa fa-check"></i><b>4.3</b> Trace 工具</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html"><i class="fa fa-check"></i><b>5</b> 深入 SDK</a><ul>
<li class="chapter" data-level="5.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#内存管理"><i class="fa fa-check"></i><b>5.1</b> 内存管理</a><ul>
<li class="chapter" data-level="5.1.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#全局分配"><i class="fa fa-check"></i><b>5.1.1</b> 全局分配</a></li>
<li class="chapter" data-level="5.1.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#使用栈"><i class="fa fa-check"></i><b>5.1.2</b> 使用栈</a></li>
<li class="chapter" data-level="5.1.3" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#使用堆"><i class="fa fa-check"></i><b>5.1.3</b> 使用堆</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#多任务"><i class="fa fa-check"></i><b>5.2</b> 多任务</a></li>
<li class="chapter" data-level="5.3" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#中断管理"><i class="fa fa-check"></i><b>5.3</b> 中断管理</a></li>
<li class="chapter" data-level="5.4" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#功耗管理适用于-ing918xx"><i class="fa fa-check"></i><b>5.4</b> 功耗管理（适用于 ING918xx）</a></li>
<li class="chapter" data-level="5.5" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#cmsis-api"><i class="fa fa-check"></i><b>5.5</b> CMSIS API</a></li>
<li class="chapter" data-level="5.6" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#debugging-tracing"><i class="fa fa-check"></i><b>5.6</b> 调试与跟踪</a><ul>
<li class="chapter" data-level="5.6.1" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#有关-segger-rtt-的使用提示"><i class="fa fa-check"></i><b>5.6.1</b> 有关 SEGGER RTT 的使用提示</a></li>
<li class="chapter" data-level="5.6.2" data-path="dive-into-sdk.html"><a href="dive-into-sdk.html#内存转储"><i class="fa fa-check"></i><b>5.6.2</b> 内存转储</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="api-ref.html"><a href="api-ref.html"><i class="fa fa-check"></i><b>6</b> Platform API 参考</a><ul>
<li class="chapter" data-level="6.1" data-path="api-ref.html"><a href="api-ref.html#platform_32k_rc_auto_tune"><i class="fa fa-check"></i><b>6.1</b> <code>platform_32k_rc_auto_tune</code></a><ul>
<li class="chapter" data-level="6.1.1" data-path="api-ref.html"><a href="api-ref.html#原型"><i class="fa fa-check"></i><b>6.1.1</b> 原型</a></li>
<li class="chapter" data-level="6.1.2" data-path="api-ref.html"><a href="api-ref.html#参数表"><i class="fa fa-check"></i><b>6.1.2</b> 参数表</a></li>
<li class="chapter" data-level="6.1.3" data-path="api-ref.html"><a href="api-ref.html#返回值"><i class="fa fa-check"></i><b>6.1.3</b> 返回值</a></li>
<li class="chapter" data-level="6.1.4" data-path="api-ref.html"><a href="api-ref.html#备注"><i class="fa fa-check"></i><b>6.1.4</b> 备注</a></li>
<li class="chapter" data-level="6.1.5" data-path="api-ref.html"><a href="api-ref.html#示例"><i class="fa fa-check"></i><b>6.1.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="api-ref.html"><a href="api-ref.html#platform_32k_rc_tune"><i class="fa fa-check"></i><b>6.2</b> <code>platform_32k_rc_tune</code></a><ul>
<li class="chapter" data-level="6.2.1" data-path="api-ref.html"><a href="api-ref.html#原型-1"><i class="fa fa-check"></i><b>6.2.1</b> 原型</a></li>
<li class="chapter" data-level="6.2.2" data-path="api-ref.html"><a href="api-ref.html#参数表-1"><i class="fa fa-check"></i><b>6.2.2</b> 参数表</a></li>
<li class="chapter" data-level="6.2.3" data-path="api-ref.html"><a href="api-ref.html#返回值-1"><i class="fa fa-check"></i><b>6.2.3</b> 返回值</a></li>
<li class="chapter" data-level="6.2.4" data-path="api-ref.html"><a href="api-ref.html#备注-1"><i class="fa fa-check"></i><b>6.2.4</b> 备注</a></li>
<li class="chapter" data-level="6.2.5" data-path="api-ref.html"><a href="api-ref.html#示例-1"><i class="fa fa-check"></i><b>6.2.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="api-ref.html"><a href="api-ref.html#platform_config"><i class="fa fa-check"></i><b>6.3</b> <code>platform_config</code></a><ul>
<li class="chapter" data-level="6.3.1" data-path="api-ref.html"><a href="api-ref.html#原型-2"><i class="fa fa-check"></i><b>6.3.1</b> 原型</a></li>
<li class="chapter" data-level="6.3.2" data-path="api-ref.html"><a href="api-ref.html#参数表-2"><i class="fa fa-check"></i><b>6.3.2</b> 参数表</a></li>
<li class="chapter" data-level="6.3.3" data-path="api-ref.html"><a href="api-ref.html#返回值-2"><i class="fa fa-check"></i><b>6.3.3</b> 返回值</a></li>
<li class="chapter" data-level="6.3.4" data-path="api-ref.html"><a href="api-ref.html#备注-2"><i class="fa fa-check"></i><b>6.3.4</b> 备注</a></li>
<li class="chapter" data-level="6.3.5" data-path="api-ref.html"><a href="api-ref.html#示例-2"><i class="fa fa-check"></i><b>6.3.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="api-ref.html"><a href="api-ref.html#platform_get_heap_status"><i class="fa fa-check"></i><b>6.4</b> <code>platform_get_heap_status</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="api-ref.html"><a href="api-ref.html#原型-3"><i class="fa fa-check"></i><b>6.4.1</b> 原型</a></li>
<li class="chapter" data-level="6.4.2" data-path="api-ref.html"><a href="api-ref.html#参数表-3"><i class="fa fa-check"></i><b>6.4.2</b> 参数表</a></li>
<li class="chapter" data-level="6.4.3" data-path="api-ref.html"><a href="api-ref.html#返回值-3"><i class="fa fa-check"></i><b>6.4.3</b> 返回值</a></li>
<li class="chapter" data-level="6.4.4" data-path="api-ref.html"><a href="api-ref.html#备注-3"><i class="fa fa-check"></i><b>6.4.4</b> 备注</a></li>
<li class="chapter" data-level="6.4.5" data-path="api-ref.html"><a href="api-ref.html#示例-3"><i class="fa fa-check"></i><b>6.4.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="api-ref.html"><a href="api-ref.html#platform_get_us_time"><i class="fa fa-check"></i><b>6.5</b> <code>platform_get_us_time</code></a><ul>
<li class="chapter" data-level="6.5.1" data-path="api-ref.html"><a href="api-ref.html#原型-4"><i class="fa fa-check"></i><b>6.5.1</b> 原型</a></li>
<li class="chapter" data-level="6.5.2" data-path="api-ref.html"><a href="api-ref.html#参数表-4"><i class="fa fa-check"></i><b>6.5.2</b> 参数表</a></li>
<li class="chapter" data-level="6.5.3" data-path="api-ref.html"><a href="api-ref.html#返回值-4"><i class="fa fa-check"></i><b>6.5.3</b> 返回值</a></li>
<li class="chapter" data-level="6.5.4" data-path="api-ref.html"><a href="api-ref.html#备注-4"><i class="fa fa-check"></i><b>6.5.4</b> 备注</a></li>
<li class="chapter" data-level="6.5.5" data-path="api-ref.html"><a href="api-ref.html#示例-4"><i class="fa fa-check"></i><b>6.5.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="api-ref.html"><a href="api-ref.html#platform_get_version"><i class="fa fa-check"></i><b>6.6</b> <code>platform_get_version</code></a><ul>
<li class="chapter" data-level="6.6.1" data-path="api-ref.html"><a href="api-ref.html#原型-5"><i class="fa fa-check"></i><b>6.6.1</b> 原型</a></li>
<li class="chapter" data-level="6.6.2" data-path="api-ref.html"><a href="api-ref.html#参数表-5"><i class="fa fa-check"></i><b>6.6.2</b> 参数表</a></li>
<li class="chapter" data-level="6.6.3" data-path="api-ref.html"><a href="api-ref.html#返回值-5"><i class="fa fa-check"></i><b>6.6.3</b> 返回值</a></li>
<li class="chapter" data-level="6.6.4" data-path="api-ref.html"><a href="api-ref.html#备注-5"><i class="fa fa-check"></i><b>6.6.4</b> 备注</a></li>
<li class="chapter" data-level="6.6.5" data-path="api-ref.html"><a href="api-ref.html#示例-5"><i class="fa fa-check"></i><b>6.6.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="api-ref.html"><a href="api-ref.html#platform_hrng"><i class="fa fa-check"></i><b>6.7</b> <code>platform_hrng</code></a><ul>
<li class="chapter" data-level="6.7.1" data-path="api-ref.html"><a href="api-ref.html#原型-6"><i class="fa fa-check"></i><b>6.7.1</b> 原型</a></li>
<li class="chapter" data-level="6.7.2" data-path="api-ref.html"><a href="api-ref.html#参数表-6"><i class="fa fa-check"></i><b>6.7.2</b> 参数表</a></li>
<li class="chapter" data-level="6.7.3" data-path="api-ref.html"><a href="api-ref.html#返回值-6"><i class="fa fa-check"></i><b>6.7.3</b> 返回值</a></li>
<li class="chapter" data-level="6.7.4" data-path="api-ref.html"><a href="api-ref.html#备注-6"><i class="fa fa-check"></i><b>6.7.4</b> 备注</a></li>
<li class="chapter" data-level="6.7.5" data-path="api-ref.html"><a href="api-ref.html#示例-6"><i class="fa fa-check"></i><b>6.7.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="api-ref.html"><a href="api-ref.html#platform_install_isr_stack"><i class="fa fa-check"></i><b>6.8</b> <code>platform_install_isr_stack</code></a><ul>
<li class="chapter" data-level="6.8.1" data-path="api-ref.html"><a href="api-ref.html#原型-7"><i class="fa fa-check"></i><b>6.8.1</b> 原型</a></li>
<li class="chapter" data-level="6.8.2" data-path="api-ref.html"><a href="api-ref.html#参数表-7"><i class="fa fa-check"></i><b>6.8.2</b> 参数表</a></li>
<li class="chapter" data-level="6.8.3" data-path="api-ref.html"><a href="api-ref.html#返回值-7"><i class="fa fa-check"></i><b>6.8.3</b> 返回值</a></li>
<li class="chapter" data-level="6.8.4" data-path="api-ref.html"><a href="api-ref.html#备注-7"><i class="fa fa-check"></i><b>6.8.4</b> 备注</a></li>
<li class="chapter" data-level="6.8.5" data-path="api-ref.html"><a href="api-ref.html#示例-7"><i class="fa fa-check"></i><b>6.8.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="api-ref.html"><a href="api-ref.html#platform_printf"><i class="fa fa-check"></i><b>6.9</b> <code>platform_printf</code></a><ul>
<li class="chapter" data-level="6.9.1" data-path="api-ref.html"><a href="api-ref.html#原型-8"><i class="fa fa-check"></i><b>6.9.1</b> 原型</a></li>
<li class="chapter" data-level="6.9.2" data-path="api-ref.html"><a href="api-ref.html#参数表-8"><i class="fa fa-check"></i><b>6.9.2</b> 参数表</a></li>
<li class="chapter" data-level="6.9.3" data-path="api-ref.html"><a href="api-ref.html#返回值-8"><i class="fa fa-check"></i><b>6.9.3</b> 返回值</a></li>
<li class="chapter" data-level="6.9.4" data-path="api-ref.html"><a href="api-ref.html#备注-8"><i class="fa fa-check"></i><b>6.9.4</b> 备注</a></li>
<li class="chapter" data-level="6.9.5" data-path="api-ref.html"><a href="api-ref.html#示例-8"><i class="fa fa-check"></i><b>6.9.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="api-ref.html"><a href="api-ref.html#platform_raise_assertion"><i class="fa fa-check"></i><b>6.10</b> <code>platform_raise_assertion</code></a><ul>
<li class="chapter" data-level="6.10.1" data-path="api-ref.html"><a href="api-ref.html#原型-9"><i class="fa fa-check"></i><b>6.10.1</b> 原型</a></li>
<li class="chapter" data-level="6.10.2" data-path="api-ref.html"><a href="api-ref.html#参数表-9"><i class="fa fa-check"></i><b>6.10.2</b> 参数表</a></li>
<li class="chapter" data-level="6.10.3" data-path="api-ref.html"><a href="api-ref.html#返回值-9"><i class="fa fa-check"></i><b>6.10.3</b> 返回值</a></li>
<li class="chapter" data-level="6.10.4" data-path="api-ref.html"><a href="api-ref.html#备注-9"><i class="fa fa-check"></i><b>6.10.4</b> 备注</a></li>
<li class="chapter" data-level="6.10.5" data-path="api-ref.html"><a href="api-ref.html#示例-9"><i class="fa fa-check"></i><b>6.10.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="api-ref.html"><a href="api-ref.html#platform_rand"><i class="fa fa-check"></i><b>6.11</b> <code>platform_rand</code></a><ul>
<li class="chapter" data-level="6.11.1" data-path="api-ref.html"><a href="api-ref.html#原型-10"><i class="fa fa-check"></i><b>6.11.1</b> 原型</a></li>
<li class="chapter" data-level="6.11.2" data-path="api-ref.html"><a href="api-ref.html#参数表-10"><i class="fa fa-check"></i><b>6.11.2</b> 参数表</a></li>
<li class="chapter" data-level="6.11.3" data-path="api-ref.html"><a href="api-ref.html#返回值-10"><i class="fa fa-check"></i><b>6.11.3</b> 返回值</a></li>
<li class="chapter" data-level="6.11.4" data-path="api-ref.html"><a href="api-ref.html#备注-10"><i class="fa fa-check"></i><b>6.11.4</b> 备注</a></li>
<li class="chapter" data-level="6.11.5" data-path="api-ref.html"><a href="api-ref.html#示例-10"><i class="fa fa-check"></i><b>6.11.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="api-ref.html"><a href="api-ref.html#platform_read_info"><i class="fa fa-check"></i><b>6.12</b> <code>platform_read_info</code></a><ul>
<li class="chapter" data-level="6.12.1" data-path="api-ref.html"><a href="api-ref.html#原型-11"><i class="fa fa-check"></i><b>6.12.1</b> 原型</a></li>
<li class="chapter" data-level="6.12.2" data-path="api-ref.html"><a href="api-ref.html#参数表-11"><i class="fa fa-check"></i><b>6.12.2</b> 参数表</a></li>
<li class="chapter" data-level="6.12.3" data-path="api-ref.html"><a href="api-ref.html#返回值-11"><i class="fa fa-check"></i><b>6.12.3</b> 返回值</a></li>
<li class="chapter" data-level="6.12.4" data-path="api-ref.html"><a href="api-ref.html#备注-11"><i class="fa fa-check"></i><b>6.12.4</b> 备注</a></li>
<li class="chapter" data-level="6.12.5" data-path="api-ref.html"><a href="api-ref.html#示例-11"><i class="fa fa-check"></i><b>6.12.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="api-ref.html"><a href="api-ref.html#platform_read_persistent_reg"><i class="fa fa-check"></i><b>6.13</b> <code>platform_read_persistent_reg</code></a><ul>
<li class="chapter" data-level="6.13.1" data-path="api-ref.html"><a href="api-ref.html#原型-12"><i class="fa fa-check"></i><b>6.13.1</b> 原型</a></li>
<li class="chapter" data-level="6.13.2" data-path="api-ref.html"><a href="api-ref.html#参数表-12"><i class="fa fa-check"></i><b>6.13.2</b> 参数表</a></li>
<li class="chapter" data-level="6.13.3" data-path="api-ref.html"><a href="api-ref.html#返回值-12"><i class="fa fa-check"></i><b>6.13.3</b> 返回值</a></li>
<li class="chapter" data-level="6.13.4" data-path="api-ref.html"><a href="api-ref.html#备注-12"><i class="fa fa-check"></i><b>6.13.4</b> 备注</a></li>
<li class="chapter" data-level="6.13.5" data-path="api-ref.html"><a href="api-ref.html#示例-12"><i class="fa fa-check"></i><b>6.13.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="api-ref.html"><a href="api-ref.html#platform_reset"><i class="fa fa-check"></i><b>6.14</b> <code>platform_reset</code></a><ul>
<li class="chapter" data-level="6.14.1" data-path="api-ref.html"><a href="api-ref.html#原型-13"><i class="fa fa-check"></i><b>6.14.1</b> 原型</a></li>
<li class="chapter" data-level="6.14.2" data-path="api-ref.html"><a href="api-ref.html#参数表-13"><i class="fa fa-check"></i><b>6.14.2</b> 参数表</a></li>
<li class="chapter" data-level="6.14.3" data-path="api-ref.html"><a href="api-ref.html#返回值-13"><i class="fa fa-check"></i><b>6.14.3</b> 返回值</a></li>
<li class="chapter" data-level="6.14.4" data-path="api-ref.html"><a href="api-ref.html#备注-13"><i class="fa fa-check"></i><b>6.14.4</b> 备注</a></li>
<li class="chapter" data-level="6.14.5" data-path="api-ref.html"><a href="api-ref.html#示例-13"><i class="fa fa-check"></i><b>6.14.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.15" data-path="api-ref.html"><a href="api-ref.html#platform_set_evt_callback"><i class="fa fa-check"></i><b>6.15</b> <code>platform_set_evt_callback</code></a><ul>
<li class="chapter" data-level="6.15.1" data-path="api-ref.html"><a href="api-ref.html#原型-14"><i class="fa fa-check"></i><b>6.15.1</b> 原型</a></li>
<li class="chapter" data-level="6.15.2" data-path="api-ref.html"><a href="api-ref.html#参数表-14"><i class="fa fa-check"></i><b>6.15.2</b> 参数表</a></li>
<li class="chapter" data-level="6.15.3" data-path="api-ref.html"><a href="api-ref.html#返回值-14"><i class="fa fa-check"></i><b>6.15.3</b> 返回值</a></li>
<li class="chapter" data-level="6.15.4" data-path="api-ref.html"><a href="api-ref.html#备注-14"><i class="fa fa-check"></i><b>6.15.4</b> 备注</a></li>
<li class="chapter" data-level="6.15.5" data-path="api-ref.html"><a href="api-ref.html#示例-14"><i class="fa fa-check"></i><b>6.15.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.16" data-path="api-ref.html"><a href="api-ref.html#platform_set_irq_callback"><i class="fa fa-check"></i><b>6.16</b> <code>platform_set_irq_callback</code></a><ul>
<li class="chapter" data-level="6.16.1" data-path="api-ref.html"><a href="api-ref.html#原型-15"><i class="fa fa-check"></i><b>6.16.1</b> 原型</a></li>
<li class="chapter" data-level="6.16.2" data-path="api-ref.html"><a href="api-ref.html#参数表-15"><i class="fa fa-check"></i><b>6.16.2</b> 参数表</a></li>
<li class="chapter" data-level="6.16.3" data-path="api-ref.html"><a href="api-ref.html#返回值-15"><i class="fa fa-check"></i><b>6.16.3</b> 返回值</a></li>
<li class="chapter" data-level="6.16.4" data-path="api-ref.html"><a href="api-ref.html#备注-15"><i class="fa fa-check"></i><b>6.16.4</b> 备注</a></li>
<li class="chapter" data-level="6.16.5" data-path="api-ref.html"><a href="api-ref.html#示例-15"><i class="fa fa-check"></i><b>6.16.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.17" data-path="api-ref.html"><a href="api-ref.html#platform_shutdown"><i class="fa fa-check"></i><b>6.17</b> <code>platform_shutdown</code></a><ul>
<li class="chapter" data-level="6.17.1" data-path="api-ref.html"><a href="api-ref.html#原型-16"><i class="fa fa-check"></i><b>6.17.1</b> 原型</a></li>
<li class="chapter" data-level="6.17.2" data-path="api-ref.html"><a href="api-ref.html#参数表-16"><i class="fa fa-check"></i><b>6.17.2</b> 参数表</a></li>
<li class="chapter" data-level="6.17.3" data-path="api-ref.html"><a href="api-ref.html#返回值-16"><i class="fa fa-check"></i><b>6.17.3</b> 返回值</a></li>
<li class="chapter" data-level="6.17.4" data-path="api-ref.html"><a href="api-ref.html#备注-16"><i class="fa fa-check"></i><b>6.17.4</b> 备注</a></li>
<li class="chapter" data-level="6.17.5" data-path="api-ref.html"><a href="api-ref.html#示例-16"><i class="fa fa-check"></i><b>6.17.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.18" data-path="api-ref.html"><a href="api-ref.html#api-switch-app"><i class="fa fa-check"></i><b>6.18</b> <code>platform_switch_app</code></a><ul>
<li class="chapter" data-level="6.18.1" data-path="api-ref.html"><a href="api-ref.html#原型-17"><i class="fa fa-check"></i><b>6.18.1</b> 原型</a></li>
<li class="chapter" data-level="6.18.2" data-path="api-ref.html"><a href="api-ref.html#参数表-17"><i class="fa fa-check"></i><b>6.18.2</b> 参数表</a></li>
<li class="chapter" data-level="6.18.3" data-path="api-ref.html"><a href="api-ref.html#返回值-17"><i class="fa fa-check"></i><b>6.18.3</b> 返回值</a></li>
<li class="chapter" data-level="6.18.4" data-path="api-ref.html"><a href="api-ref.html#备注-17"><i class="fa fa-check"></i><b>6.18.4</b> 备注</a></li>
<li class="chapter" data-level="6.18.5" data-path="api-ref.html"><a href="api-ref.html#示例-17"><i class="fa fa-check"></i><b>6.18.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.19" data-path="api-ref.html"><a href="api-ref.html#platform_write_persistent_reg"><i class="fa fa-check"></i><b>6.19</b> <code>platform_write_persistent_reg</code></a><ul>
<li class="chapter" data-level="6.19.1" data-path="api-ref.html"><a href="api-ref.html#原型-18"><i class="fa fa-check"></i><b>6.19.1</b> 原型</a></li>
<li class="chapter" data-level="6.19.2" data-path="api-ref.html"><a href="api-ref.html#参数表-18"><i class="fa fa-check"></i><b>6.19.2</b> 参数表</a></li>
<li class="chapter" data-level="6.19.3" data-path="api-ref.html"><a href="api-ref.html#返回值-18"><i class="fa fa-check"></i><b>6.19.3</b> 返回值</a></li>
<li class="chapter" data-level="6.19.4" data-path="api-ref.html"><a href="api-ref.html#备注-18"><i class="fa fa-check"></i><b>6.19.4</b> 备注</a></li>
<li class="chapter" data-level="6.19.5" data-path="api-ref.html"><a href="api-ref.html#示例-18"><i class="fa fa-check"></i><b>6.19.5</b> 示例</a></li>
</ul></li>
<li class="chapter" data-level="6.20" data-path="api-ref.html"><a href="api-ref.html#syssetpublicdeviceaddr"><i class="fa fa-check"></i><b>6.20</b> <code>sysSetPublicDeviceAddr</code></a><ul>
<li class="chapter" data-level="6.20.1" data-path="api-ref.html"><a href="api-ref.html#原型-19"><i class="fa fa-check"></i><b>6.20.1</b> 原型</a></li>
<li class="chapter" data-level="6.20.2" data-path="api-ref.html"><a href="api-ref.html#参数表-19"><i class="fa fa-check"></i><b>6.20.2</b> 参数表</a></li>
<li class="chapter" data-level="6.20.3" data-path="api-ref.html"><a href="api-ref.html#返回值-19"><i class="fa fa-check"></i><b>6.20.3</b> 返回值</a></li>
<li class="chapter" data-level="6.20.4" data-path="api-ref.html"><a href="api-ref.html#备注-19"><i class="fa fa-check"></i><b>6.20.4</b> 备注</a></li>
<li class="chapter" data-level="6.20.5" data-path="api-ref.html"><a href="api-ref.html#示例-19"><i class="fa fa-check"></i><b>6.20.5</b> 示例</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="revision-history.html"><a href="revision-history.html"><i class="fa fa-check"></i><b>7</b> 版本历史</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">INGCHIPS SDK 开发者用户手册</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="api-ref" class="section level1">
<h1><span class="header-section-number">6</span> Platform API 参考</h1>
<div id="platform_32k_rc_auto_tune" class="section level2">
<h2><span class="header-section-number">6.1</span> <code>platform_32k_rc_auto_tune</code></h2>
<p>自动调谐内部的 32k RC 时钟，得到调谐参数。</p>
<div id="原型" class="section level3">
<h3><span class="header-section-number">6.1.1</span> 原型</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="api-ref.html#cb39-1"></a><span class="dt">uint16_t</span> platform_32k_rc_auto_tune(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表" class="section level3">
<h3><span class="header-section-number">6.1.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值" class="section level3">
<h3><span class="header-section-number">6.1.3</span> 返回值</h3>
<p>16 比特调谐参数。</p>
</div>
<div id="备注" class="section level3">
<h3><span class="header-section-number">6.1.4</span> 备注</h3>
<p>本操作需要花费 ~250ms。建议只调用一次本函数，记录调谐参数以备使用。</p>
</div>
<div id="示例" class="section level3">
<h3><span class="header-section-number">6.1.5</span> 示例</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="api-ref.html#cb40-1"></a><span class="dt">uint16_t</span> value = platform_32k_rc_auto_tune();</span></code></pre></div>
</div>
</div>
<div id="platform_32k_rc_tune" class="section level2">
<h2><span class="header-section-number">6.2</span> <code>platform_32k_rc_tune</code></h2>
<p>使用给定参数调谐内部的 32k RC 时钟。</p>
<div id="原型-1" class="section level3">
<h3><span class="header-section-number">6.2.1</span> 原型</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="api-ref.html#cb41-1"></a><span class="dt">void</span> platform_32k_rc_tune(<span class="dt">uint16_t</span> value);</span></code></pre></div>
</div>
<div id="参数表-1" class="section level3">
<h3><span class="header-section-number">6.2.2</span> 参数表</h3>
<ul>
<li><p><code>uint16_t value</code></p>
<p>调谐参数 (从 <a href="api-ref.html#platform_32k_rc_auto_tune"><code>platform_32k_rc_auto_tune</code></a> 得到)</p></li>
</ul>
</div>
<div id="返回值-1" class="section level3">
<h3><span class="header-section-number">6.2.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-1" class="section level3">
<h3><span class="header-section-number">6.2.4</span> 备注</h3>
<p>void.</p>
</div>
<div id="示例-1" class="section level3">
<h3><span class="header-section-number">6.2.5</span> 示例</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="api-ref.html#cb42-1"></a>platform_32k_rc_tune(value);</span></code></pre></div>
</div>
</div>
<div id="platform_config" class="section level2">
<h2><span class="header-section-number">6.3</span> <code>platform_config</code></h2>
<p>配置平台功能。</p>
<div id="原型-2" class="section level3">
<h3><span class="header-section-number">6.3.1</span> 原型</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="api-ref.html#cb43-1"></a><span class="dt">void</span> platform_config(<span class="dt">const</span> platform_cfg_item_t item,</span>
<span id="cb43-2"><a href="api-ref.html#cb43-2"></a>                     <span class="dt">const</span> <span class="dt">uint32_t</span> flag);</span></code></pre></div>
</div>
<div id="参数表-2" class="section level3">
<h3><span class="header-section-number">6.3.2</span> 参数表</h3>
<ul>
<li><p><code>const platform_cfg_item_t item</code></p>
<p>指定要配置的项。可以是下列值：</p>
<ul>
<li><p><code>PLATFORM_CFG_LOG_HCI</code>: HCI 消息的 printf 打印。默认值：关闭。</p></li>
<li><p><code>PLATFORM_CFG_POWER_SAVING</code>: 省电功能。默认值：关闭。</p></li>
<li><p><code>PLATFORM_CFG_TRACE_MASK</code>: Trace 数据项的比特图。默认值：<code>0</code>。</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="api-ref.html#cb44-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb44-2"><a href="api-ref.html#cb44-2"></a>{</span>
<span id="cb44-3"><a href="api-ref.html#cb44-3"></a>    PLATFORM_TRACE_ID_EVENT                 = <span class="dv">0</span>,</span>
<span id="cb44-4"><a href="api-ref.html#cb44-4"></a>    PLATFORM_TRACE_ID_HCI_CMD               = <span class="dv">1</span>,</span>
<span id="cb44-5"><a href="api-ref.html#cb44-5"></a>    PLATFORM_TRACE_ID_HCI_EVENT             = <span class="dv">2</span>,</span>
<span id="cb44-6"><a href="api-ref.html#cb44-6"></a>    PLATFORM_TRACE_ID_HCI_ACL               = <span class="dv">3</span>,</span>
<span id="cb44-7"><a href="api-ref.html#cb44-7"></a>    PLATFORM_TRACE_ID_LLCP                  = <span class="dv">4</span></span>
<span id="cb44-8"><a href="api-ref.html#cb44-8"></a>} platform_trace_item_t;</span></code></pre></div></li>
<li><p><code>PLATFORM_CFG_RC32K_EN</code>: 使能/禁用内部 32k RC 时钟。默认值：使能。</p></li>
<li><p><code>PLATFORM_CFG_OSC32K_EN</code>: 使能/禁用外部 32k 晶体。默认值：使能。</p></li>
<li><p><code>PLATFORM_CFG_32K_CLK</code>: 32k 时钟源选择。参数为 <code>platform_32k_clk_src_t</code> 类型。默认值：<code>PLATFORM_32K_RC</code></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="api-ref.html#cb45-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb45-2"><a href="api-ref.html#cb45-2"></a>{</span>
<span id="cb45-3"><a href="api-ref.html#cb45-3"></a>    PLATFORM_32K_OSC,           <span class="co">// 外部 32k 晶体</span></span>
<span id="cb45-4"><a href="api-ref.html#cb45-4"></a>    PLATFORM_32K_RC             <span class="co">// 内部 32k RC 时钟</span></span>
<span id="cb45-5"><a href="api-ref.html#cb45-5"></a>} platform_32k_clk_src_t;</span></code></pre></div>
<p>当修改本配置时，RC32K 和 OSC32K 必须同时处理使能、运行状态：</p>
<ul>
<li>对于 OSC32K，等待直到 OSC32K 的状态变为 OK；</li>
<li>对于 RC32K，使能后等待 100us。</li>
</ul>
<p>提示：在关闭不用的时钟前再等待 100us。</p></li>
<li><p><code>PLATFORM_CFG_32K_CLK_ACC</code>: 声明 32k 时钟的精度（ppm）。</p></li>
<li><p><code>PLATFORM_CFG_32K_CALI_PERIOD</code>: 32k 时钟的校准间隔（秒）。默认值：3600 * 2 (2 小时)。</p></li>
<li><p><code>PLATFORM_CFG_DEEP_SLEEP_TIME_REDUCTION</code>: 睡眠时间预留量（深睡眠模式）（微秒）。默认值：~550us。</p></li>
<li><p><code>PLATFORM_CFG_SLEEP_TIME_REDUCTION</code>: 睡眠时间预留量（其它睡眠模式）（微秒）。默认值： ~450us.</p></li>
<li><p><code>PLATFORM_CFG_LL_DBG_FLAGS</code>: 链路层标志位，是 <code>ll_cfg_flag_t</code> 中各比特的组合。</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb46-1"><a href="api-ref.html#cb46-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb46-2"><a href="api-ref.html#cb46-2"></a>{</span>
<span id="cb46-3"><a href="api-ref.html#cb46-3"></a>    LL_FLAG_DISABLE_CTE_PREPROCESSING = <span class="dv">1</span>,  <span class="co">// 关闭 CTE 预处理</span></span>
<span id="cb46-4"><a href="api-ref.html#cb46-4"></a>    LL_FLAG_LEGACY_ONLY_INITIATING = <span class="dv">4</span>,     <span class="co">// 仅使用 legacy 广播发起连接</span></span>
<span id="cb46-5"><a href="api-ref.html#cb46-5"></a>    LL_FLAG_LEGACY_ONLY_SCANNING = <span class="dv">8</span>,       <span class="co">// 仅扫描 legacy 广播</span></span>
<span id="cb46-6"><a href="api-ref.html#cb46-6"></a>} ll_cfg_flag_t;</span></code></pre></div></li>
<li><p><code>PLATFORM_CFG_LL_LEGACY_ADV_INTERVAL</code>: 链路层 legacy 广播内部间隔（微秒），其中高 16 比特用于高频度广播
（high duty cycle），低 16 比特用于正常频度广播（normal duty cycle）。高频度广播的默认值：1250，
正常频度的默认值：1500。</p></li>
</ul></li>
<li><p><code>const uint32_t flag</code></p>
<p>对于可以使能、禁用的配置，用下面的值进行控制：</p>
<ul>
<li><code>PLATFORM_CFG_ENABLE</code></li>
<li><code>PLATFORM_CFG_DISABLE</code></li>
</ul></li>
</ul>
</div>
<div id="返回值-2" class="section level3">
<h3><span class="header-section-number">6.3.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-2" class="section level3">
<h3><span class="header-section-number">6.3.4</span> 备注</h3>
<p>无。</p>
</div>
<div id="示例-2" class="section level3">
<h3><span class="header-section-number">6.3.5</span> 示例</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="api-ref.html#cb47-1"></a><span class="co">// 使能 HCI 打印</span></span>
<span id="cb47-2"><a href="api-ref.html#cb47-2"></a>platform_config(PLATFORM_CFG_LOG_HCI, PLATFORM_CFG_ENABLE);</span></code></pre></div>
</div>
</div>
<div id="platform_get_heap_status" class="section level2">
<h2><span class="header-section-number">6.4</span> <code>platform_get_heap_status</code></h2>
<p>得到堆当前的状态信息，如剩余空间等。</p>
<div id="原型-3" class="section level3">
<h3><span class="header-section-number">6.4.1</span> 原型</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="api-ref.html#cb48-1"></a><span class="dt">void</span> platform_get_heap_status(platform_heap_status_t *status);</span></code></pre></div>
</div>
<div id="参数表-3" class="section level3">
<h3><span class="header-section-number">6.4.2</span> 参数表</h3>
<ul>
<li><p><code>platform_heap_status_t *status</code></p>
<p>堆的状态。</p></li>
</ul>
</div>
<div id="返回值-3" class="section level3">
<h3><span class="header-section-number">6.4.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-3" class="section level3">
<h3><span class="header-section-number">6.4.4</span> 备注</h3>
<p>堆的状态定义如下：</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="api-ref.html#cb49-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb49-2"><a href="api-ref.html#cb49-2"></a>{</span>
<span id="cb49-3"><a href="api-ref.html#cb49-3"></a>    <span class="dt">uint32_t</span> bytes_free;                <span class="co">// 剩余空间</span></span>
<span id="cb49-4"><a href="api-ref.html#cb49-4"></a>    <span class="dt">uint32_t</span> bytes_minimum_ever_free;   <span class="co">// 自启动以来剩余空间的最小值</span></span>
<span id="cb49-5"><a href="api-ref.html#cb49-5"></a>} platform_heap_status_t;</span></code></pre></div>
</div>
<div id="示例-3" class="section level3">
<h3><span class="header-section-number">6.4.5</span> 示例</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="api-ref.html#cb50-1"></a>platform_heap_status_t status;</span>
<span id="cb50-2"><a href="api-ref.html#cb50-2"></a>platform_get_heap_status(&amp;status);</span></code></pre></div>
</div>
</div>
<div id="platform_get_us_time" class="section level2">
<h2><span class="header-section-number">6.5</span> <code>platform_get_us_time</code></h2>
<p>读取内部计时器的时间。该计时器从 BLE 初始化之后开始计时。</p>
<div id="原型-4" class="section level3">
<h3><span class="header-section-number">6.5.1</span> 原型</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="api-ref.html#cb51-1"></a><span class="dt">int64_t</span> platform_get_us_time(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表-4" class="section level3">
<h3><span class="header-section-number">6.5.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值-4" class="section level3">
<h3><span class="header-section-number">6.5.3</span> 返回值</h3>
<p>内部计时器的微秒计数值。</p>
</div>
<div id="备注-4" class="section level3">
<h3><span class="header-section-number">6.5.4</span> 备注</h3>
<p>关机后该计时器会归零，而 RTC 计时器则不会。</p>
</div>
<div id="示例-4" class="section level3">
<h3><span class="header-section-number">6.5.5</span> 示例</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="api-ref.html#cb52-1"></a>platform_get_us_time();</span></code></pre></div>
</div>
</div>
<div id="platform_get_version" class="section level2">
<h2><span class="header-section-number">6.6</span> <code>platform_get_version</code></h2>
<p>得到 platform 的版本号。</p>
<div id="原型-5" class="section level3">
<h3><span class="header-section-number">6.6.1</span> 原型</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="api-ref.html#cb53-1"></a><span class="dt">const</span> platform_ver_t *platform_get_version(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表-5" class="section level3">
<h3><span class="header-section-number">6.6.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值-5" class="section level3">
<h3><span class="header-section-number">6.6.3</span> 返回值</h3>
<p>指向 <code>platform_ver_t</code> 的指针。</p>
</div>
<div id="备注-5" class="section level3">
<h3><span class="header-section-number">6.6.4</span> 备注</h3>
<p>Platform 版本号包含 3 个部分，major，minor 和 patch：</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="api-ref.html#cb54-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> platform_ver</span>
<span id="cb54-2"><a href="api-ref.html#cb54-2"></a>{</span>
<span id="cb54-3"><a href="api-ref.html#cb54-3"></a>    <span class="dt">unsigned</span> <span class="dt">short</span> major;</span>
<span id="cb54-4"><a href="api-ref.html#cb54-4"></a>    <span class="dt">char</span>  minor;</span>
<span id="cb54-5"><a href="api-ref.html#cb54-5"></a>    <span class="dt">char</span>  patch;</span>
<span id="cb54-6"><a href="api-ref.html#cb54-6"></a>} platform_ver_t;</span></code></pre></div>
</div>
<div id="示例-5" class="section level3">
<h3><span class="header-section-number">6.6.5</span> 示例</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="api-ref.html#cb55-1"></a><span class="dt">const</span> platform_ver_t *ver = platform_get_version();</span>
<span id="cb55-2"><a href="api-ref.html#cb55-2"></a>printf(<span class="st">&quot;Platform version: %d.%d.%d</span><span class="sc">\n</span><span class="st">&quot;</span>, ver-&gt;major, ver-&gt;minor, ver-&gt;patch);</span></code></pre></div>
</div>
</div>
<div id="platform_hrng" class="section level2">
<h2><span class="header-section-number">6.7</span> <code>platform_hrng</code></h2>
<p>使用硬件真随机数发生器产生任意长度的随机数。</p>
<div id="原型-6" class="section level3">
<h3><span class="header-section-number">6.7.1</span> 原型</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="api-ref.html#cb56-1"></a><span class="dt">void</span>  platform_hrng(<span class="dt">uint8_t</span> *bytes, <span class="dt">const</span> <span class="dt">uint32_t</span> len);</span></code></pre></div>
</div>
<div id="参数表-6" class="section level3">
<h3><span class="header-section-number">6.7.2</span> 参数表</h3>
<ul>
<li><p><code>uint8_t *bytes</code></p>
<p>随机数输出。</p></li>
<li><p><code>const uint32_t len</code></p>
<p>要产生的字节数。</p></li>
</ul>
</div>
<div id="返回值-6" class="section level3">
<h3><span class="header-section-number">6.7.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-6" class="section level3">
<h3><span class="header-section-number">6.7.4</span> 备注</h3>
<p>产生一定长度的随机数所需要的时间是不确定的。</p>
</div>
<div id="示例-6" class="section level3">
<h3><span class="header-section-number">6.7.5</span> 示例</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb57-1"><a href="api-ref.html#cb57-1"></a><span class="dt">uint32_t</span> strong_random;</span>
<span id="cb57-2"><a href="api-ref.html#cb57-2"></a>platform_hrng(&amp;strong_random, <span class="kw">sizeof</span>(strong_random));</span></code></pre></div>
</div>
</div>
<div id="platform_install_isr_stack" class="section level2">
<h2><span class="header-section-number">6.8</span> <code>platform_install_isr_stack</code></h2>
<p>为中断服务程序安装新的栈。</p>
<div id="原型-7" class="section level3">
<h3><span class="header-section-number">6.8.1</span> 原型</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="api-ref.html#cb58-1"></a><span class="dt">void</span> platform_install_isr_stack(<span class="dt">void</span> *top);</span></code></pre></div>
</div>
<div id="参数表-7" class="section level3">
<h3><span class="header-section-number">6.8.2</span> 参数表</h3>
<ul>
<li><p><code>void *top</code></p>
<p>新栈的栈顶，必须为 4 字节对齐。</p></li>
</ul>
</div>
<div id="返回值-7" class="section level3">
<h3><span class="header-section-number">6.8.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-7" class="section level3">
<h3><span class="header-section-number">6.8.4</span> 备注</h3>
<p>当 app 需要使用比默认 ISR 栈更大的栈时，可以使用这个 API 安装一个新的栈，替换掉旧的。</p>
<p>这个函数只允许在 <code>app_main</code> 里调用。新栈在 <code>app_main</code> 函数返回后启用。</p>
</div>
<div id="示例-7" class="section level3">
<h3><span class="header-section-number">6.8.5</span> 示例</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="api-ref.html#cb59-1"></a><span class="dt">uint32_t</span> new_stack[<span class="dv">2048</span>];</span>
<span id="cb59-2"><a href="api-ref.html#cb59-2"></a>...</span>
<span id="cb59-3"><a href="api-ref.html#cb59-3"></a>platform_install_isr_stack(new_stack + <span class="kw">sizeof</span>(new_stack) / <span class="kw">sizeof</span>(new_stack[<span class="dv">0</span>]));</span></code></pre></div>
</div>
</div>
<div id="platform_printf" class="section level2">
<h2><span class="header-section-number">6.9</span> <code>platform_printf</code></h2>
<p>Platform 内部的 <code>printf</code> 函数。</p>
<div id="原型-8" class="section level3">
<h3><span class="header-section-number">6.9.1</span> 原型</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="api-ref.html#cb60-1"></a> <span class="dt">void</span>  platform_printf(<span class="dt">const</span> <span class="dt">char</span> *format, ...);</span></code></pre></div>
</div>
<div id="参数表-8" class="section level3">
<h3><span class="header-section-number">6.9.2</span> 参数表</h3>
<ul>
<li><p><code>const char *format</code></p>
<p>格式字符串。</p></li>
<li><p><code>...</code></p>
<p>变长参数。</p></li>
</ul>
</div>
<div id="返回值-8" class="section level3">
<h3><span class="header-section-number">6.9.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-8" class="section level3">
<h3><span class="header-section-number">6.9.4</span> 备注</h3>
<p>使用这个函数既有优点也有缺点：</p>
<p>优点：</p>
<ul>
<li>这个函数位于 platform 内部，可以节省 app 程序空间</li>
</ul>
<p>缺点：</p>
<ul>
<li>输出被定向到 <code>PLATFORM_CB_EVT_PUTC</code> 事件，所以必须为该事件设立回调。</li>
</ul>
</div>
<div id="示例-8" class="section level3">
<h3><span class="header-section-number">6.9.5</span> 示例</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb61-1"><a href="api-ref.html#cb61-1"></a>platform_printf(<span class="st">&quot;Hello world&quot;</span>);</span></code></pre></div>
</div>
</div>
<div id="platform_raise_assertion" class="section level2">
<h2><span class="header-section-number">6.10</span> <code>platform_raise_assertion</code></h2>
<p>抛出软件断言。</p>
<div id="原型-9" class="section level3">
<h3><span class="header-section-number">6.10.1</span> 原型</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="api-ref.html#cb62-1"></a><span class="dt">void</span>  platform_raise_assertion(<span class="dt">const</span> <span class="dt">char</span> *file_name, <span class="dt">int</span> line_no);</span></code></pre></div>
</div>
<div id="参数表-9" class="section level3">
<h3><span class="header-section-number">6.10.2</span> 参数表</h3>
<ul>
<li><p><code>const char *file_name</code></p>
<p>断言发生的文件名。</p></li>
<li><p><code>int line_no</code></p>
<p>断言发生的代码行。</p></li>
</ul>
</div>
<div id="返回值-9" class="section level3">
<h3><span class="header-section-number">6.10.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-9" class="section level3">
<h3><span class="header-section-number">6.10.4</span> 备注</h3>
<p>无。</p>
</div>
<div id="示例-9" class="section level3">
<h3><span class="header-section-number">6.10.5</span> 示例</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="api-ref.html#cb63-1"></a>  <span class="cf">if</span> (NULL == ptr)</span>
<span id="cb63-2"><a href="api-ref.html#cb63-2"></a>    platform_raise_assertion(__FILE__, __LINE__);</span></code></pre></div>
</div>
</div>
<div id="platform_rand" class="section level2">
<h2><span class="header-section-number">6.11</span> <code>platform_rand</code></h2>
<p>使用 platform 内的伪随机数发生器（PRNG）生成伪随机整数。</p>
<div id="原型-10" class="section level3">
<h3><span class="header-section-number">6.11.1</span> 原型</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="api-ref.html#cb64-1"></a><span class="dt">int</span> platform_rand(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表-10" class="section level3">
<h3><span class="header-section-number">6.11.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值-10" class="section level3">
<h3><span class="header-section-number">6.11.3</span> 返回值</h3>
<p>一个在 0 和 RAND_MAX 之间均匀分布的随机数。</p>
</div>
<div id="备注-10" class="section level3">
<h3><span class="header-section-number">6.11.4</span> 备注</h3>
<p>上电时用硬件随机数发生数发生器为 PRNG 生成了种子。</p>
</div>
<div id="示例-10" class="section level3">
<h3><span class="header-section-number">6.11.5</span> 示例</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="api-ref.html#cb65-1"></a>printf(<span class="st">&quot;rand: %d</span><span class="sc">\n</span><span class="st">&quot;</span>, platform_rand());</span></code></pre></div>
</div>
</div>
<div id="platform_read_info" class="section level2">
<h2><span class="header-section-number">6.12</span> <code>platform_read_info</code></h2>
<p>读取 platform 信息。</p>
<div id="原型-11" class="section level3">
<h3><span class="header-section-number">6.12.1</span> 原型</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="api-ref.html#cb66-1"></a><span class="dt">uint32_t</span> platform_read_info(<span class="dt">const</span> platform_info_item_t item);</span></code></pre></div>
</div>
<div id="参数表-11" class="section level3">
<h3><span class="header-section-number">6.12.2</span> 参数表</h3>
<ul>
<li><p><code>const platform_info_item_t item</code></p>
<p>信息项：</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="api-ref.html#cb67-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb67-2"><a href="api-ref.html#cb67-2"></a>{</span>
<span id="cb67-3"><a href="api-ref.html#cb67-3"></a>    PLATFORM_INFO_OSC32K_STATUS,     <span class="co">// 外部 32k 晶体时钟的状态</span></span>
<span id="cb67-4"><a href="api-ref.html#cb67-4"></a>                                     <span class="co">// 0: 不工作；非 0: 正常工作</span></span>
<span id="cb67-5"><a href="api-ref.html#cb67-5"></a>} platform_info_item_t;</span></code></pre></div></li>
</ul>
</div>
<div id="返回值-11" class="section level3">
<h3><span class="header-section-number">6.12.3</span> 返回值</h3>
<p>信息项的值。</p>
</div>
<div id="备注-11" class="section level3">
<h3><span class="header-section-number">6.12.4</span> 备注</h3>
<p>无。</p>
</div>
<div id="示例-11" class="section level3">
<h3><span class="header-section-number">6.12.5</span> 示例</h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="api-ref.html#cb68-1"></a>platform_read_info(PLATFORM_INFO_OSC32K_STATUS);</span></code></pre></div>
</div>
</div>
<div id="platform_read_persistent_reg" class="section level2">
<h2><span class="header-section-number">6.13</span> <code>platform_read_persistent_reg</code></h2>
<p>读取持久化寄存器的值。参考
<a href="api-ref.html#platform_write_persistent_reg"><code>platform_write_persistent_reg</code></a>。</p>
<div id="原型-12" class="section level3">
<h3><span class="header-section-number">6.13.1</span> 原型</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="api-ref.html#cb69-1"></a><span class="dt">uint32_t</span> platform_read_persistent_reg(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表-12" class="section level3">
<h3><span class="header-section-number">6.13.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值-12" class="section level3">
<h3><span class="header-section-number">6.13.3</span> 返回值</h3>
<p>用 <a href="api-ref.html#platform_write_persistent_reg"><code>platform_write_persistent_reg</code></a> 写入的 <strong>4</strong> 个比特。</p>
</div>
<div id="备注-12" class="section level3">
<h3><span class="header-section-number">6.13.4</span> 备注</h3>
<p>无。</p>
</div>
<div id="示例-12" class="section level3">
<h3><span class="header-section-number">6.13.5</span> 示例</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="api-ref.html#cb70-1"></a>platform_read_persistent_reg();</span></code></pre></div>
</div>
</div>
<div id="platform_reset" class="section level2">
<h2><span class="header-section-number">6.14</span> <code>platform_reset</code></h2>
<p>复位整个系统（SoC）。</p>
<div id="原型-13" class="section level3">
<h3><span class="header-section-number">6.14.1</span> 原型</h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="api-ref.html#cb71-1"></a><span class="dt">void</span> platform_reset(<span class="dt">void</span>);</span></code></pre></div>
</div>
<div id="参数表-13" class="section level3">
<h3><span class="header-section-number">6.14.2</span> 参数表</h3>
<p>无。</p>
</div>
<div id="返回值-13" class="section level3">
<h3><span class="header-section-number">6.14.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-13" class="section level3">
<h3><span class="header-section-number">6.14.4</span> 备注</h3>
<p>在这个函数之后的代码不会被执行。</p>
</div>
<div id="示例-13" class="section level3">
<h3><span class="header-section-number">6.14.5</span> 示例</h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="api-ref.html#cb72-1"></a>  <span class="cf">if</span> (out-of-memory)</span>
<span id="cb72-2"><a href="api-ref.html#cb72-2"></a>    platform_reset();</span></code></pre></div>
</div>
</div>
<div id="platform_set_evt_callback" class="section level2">
<h2><span class="header-section-number">6.15</span> <code>platform_set_evt_callback</code></h2>
<p>为 platform 事件设置回调函数。</p>
<div id="原型-14" class="section level3">
<h3><span class="header-section-number">6.15.1</span> 原型</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="api-ref.html#cb73-1"></a><span class="dt">void</span> platform_set_evt_callback(platform_evt_callback_type_t type,</span>
<span id="cb73-2"><a href="api-ref.html#cb73-2"></a>                               f_platform_evt_cb f,</span>
<span id="cb73-3"><a href="api-ref.html#cb73-3"></a>                               <span class="dt">void</span> *user_data);</span></code></pre></div>
</div>
<div id="参数表-14" class="section level3">
<h3><span class="header-section-number">6.15.2</span> 参数表</h3>
<ul>
<li><p><code>platform_evt_callback_type_t type</code></p>
<p>事件的类型。可以是下列值：</p>
<ul>
<li><p><code>PLATFORM_CB_EVT_PUTC</code>: ASCII 字符输出事件</p>
<p>当 platform 要输出字符串日志时会触发该事件。传递到回调函数的参数 <code>void *data</code> 是从
<code>char *</code> 转换得来。</p>
<p>用 <code>ingWizard</code> 创建新项目时，如果在 <code>Common Function</code> 页面选择了 <code>Print to UART</code>，
会自动生成相关代码。</p></li>
<li><p><code>PLATFORM_CB_EVT_PROFILE_INIT</code>: BLE GATT profile 初始化事件</p>
<p>当 Host 初始化时会触发该事件要求 app 初始化 GATT profile。</p>
<p>用 <code>ingWizard</code> 创建新项目时，会自动生成相关代码。</p></li>
<li><p><code>PLATFORM_CB_EVT_ON_DEEP_SLEEP_WAKEUP</code>: 深睡眠唤醒事件</p>
<p>深睡眠中唤醒时触发该事件。在深睡眠时，外部接口（如 UART,，I2C 等）都已掉电，所以当唤醒时，
可能需要再次初始化。</p>
<p>用 <code>ingWizard</code> 创建新项目时，如果在 <code>Common Function</code> 页面选择了 <code>Deep Sleep</code>，
会自动生成相关代码。</p></li>
<li><p><code>PLATFORM_CB_EVT_QUERY_DEEP_SLEEP_ALLOWED</code>: 深睡眠许可查询事件</p>
<p>当 platform 准备进入深睡眠时，会触发该事件询问 app 当前是否允许进入深睡眠。
事件回调函数可通过返回 <code>0</code> 拒绝，返回非 <code>0</code> 允许。</p>
<p>用 <code>ingWizard</code> 创建新项目时，如果在 <code>Common Function</code> 页面选择了 <code>Deep Sleep</code>，
会自动生成相关代码。</p></li>
<li><p><code>PLATFORM_CB_EVT_HARD_FAULT</code>: Hard fault 事件</p>
<p>Hard fault 发生时触发该事件。传入回调函数的 <code>void *data</code> 参数是从
<code>hard_fault_info_t *</code> 转换得来。
如果未定义该回调，当事件发生时，CPU 进入死循环。</p></li>
<li><p><code>PLATFORM_CB_EVT_ASSERTION</code>: Software assertion fails</p>
<p>软件断言失败时触发该事件。传入回调函数的 <code>void *data</code> 参数是从
<code>assertion_info_t *</code> 转换得来。
如果未定义该回调，当事件发生时，CPU 进入死循环。</p></li>
<li><p><code>PLATFORM_CB_EVT_LLE_INIT</code>: 链路层引擎初始化完成事件</p>
<p>每当链路层引擎初始化完成时触发该事件。</p></li>
<li><p><code>PLATFORM_CB_EVT_HEAP_OOM</code>: 堆空间用完事件</p>
<p>在堆上分配内存失败时触发该事件。
如果未定义该回调，当事件发生时，CPU 进入死循环。</p></li>
<li><p><code>PLATFORM_CB_EVT_TRACE</code>: Trace 输出事件</p>
<p>当有 trace 数据项要输出时，触发该事件。
Apps 可以为该事件设置回调函数以保存或者输出 trace 数据。传人回调函数的 <code>void *data</code>
参数是从 <code>platform_trace_evt_t *</code> 转换得来（参见 <a href="dive-into-sdk.html#debugging-tracing">调试与跟踪</a>）。</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="api-ref.html#cb74-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb74-2"><a href="api-ref.html#cb74-2"></a>{</span>
<span id="cb74-3"><a href="api-ref.html#cb74-3"></a>    <span class="dt">const</span> <span class="dt">void</span> *data1;</span>
<span id="cb74-4"><a href="api-ref.html#cb74-4"></a>    <span class="dt">const</span> <span class="dt">void</span> *data2;</span>
<span id="cb74-5"><a href="api-ref.html#cb74-5"></a>    <span class="dt">uint16_t</span> len1;</span>
<span id="cb74-6"><a href="api-ref.html#cb74-6"></a>    <span class="dt">uint16_t</span> len2;</span>
<span id="cb74-7"><a href="api-ref.html#cb74-7"></a>} platform_evt_trace_t;</span></code></pre></div>
<p>一个 trace 数据项由 <code>data1</code> 和 <code>data2</code> 组成。说明：</p>
<ol style="list-style-type: decimal">
<li><p><code>len1</code> 或者 <code>len2</code> 可能为 <code>0</code>，但不会同时为 <code>0</code>；</p></li>
<li><p>如果回调函数发现无法存储或者输出长度为
<code>len1</code> + <code>len2</code> 的数据，那么应该同时丢弃 <code>data1</code> 和 <code>data2</code> 以防 trace 数据结构混乱。</p></li>
</ol></li>
</ul></li>
<li><p><code>f_platform_evt_cb f</code></p>
<p>注册到事件 <code>type</code> 的回调函数。<code>f_platform_evt_cb</code> 的类型为：</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="api-ref.html#cb75-1"></a><span class="kw">typedef</span> <span class="dt">uint32_t</span> (*f_platform_evt_cb)(<span class="dt">void</span> *data, <span class="dt">void</span> *user_data);</span></code></pre></div></li>
<li><p><code>void *user_data</code></p>
<p>这个参数将原封不动地作为 <code>user_data</code> 传递给回调函数。</p></li>
</ul>
</div>
<div id="返回值-14" class="section level3">
<h3><span class="header-section-number">6.15.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-14" class="section level3">
<h3><span class="header-section-number">6.15.4</span> 备注</h3>
<p>并不要求给所有事件都设置回调函数。</p>
<p>如果未给 <code>PLATFORM_CB_EVT_PUTC</code> 事件设置回调，所有用平台 printf 日志都会丢弃。</p>
<p>如果未给<code>PLATFORM_CB_EVT_PROFILE_INIT</code> 事件设置回调，BLE profile 为空。</p>
<p>如果未给 <code>PLATFORM_CB_EVT_ON_DEEP_SLEEP_WAKEUP</code> 事件设置回调，从深睡眠唤醒时 app 无法获得通知。</p>
<p>如果未给 <code>PLATFORM_CB_EVT_QUERY_DEEP_SLEEP_ALLOWED</code> 事件设置回调，深睡眠模式为 <strong>禁用</strong> 状态。</p>
</div>
<div id="示例-14" class="section level3">
<h3><span class="header-section-number">6.15.5</span> 示例</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="api-ref.html#cb76-1"></a><span class="dt">uint32_t</span> cb_putc(<span class="dt">char</span> *c, <span class="dt">void</span> *dummy)</span>
<span id="cb76-2"><a href="api-ref.html#cb76-2"></a>{</span>
<span id="cb76-3"><a href="api-ref.html#cb76-3"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: output char c to UART</span></span>
<span id="cb76-4"><a href="api-ref.html#cb76-4"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb76-5"><a href="api-ref.html#cb76-5"></a>}</span>
<span id="cb76-6"><a href="api-ref.html#cb76-6"></a></span>
<span id="cb76-7"><a href="api-ref.html#cb76-7"></a>......</span>
<span id="cb76-8"><a href="api-ref.html#cb76-8"></a></span>
<span id="cb76-9"><a href="api-ref.html#cb76-9"></a>platform_set_evt_callback(PLATFORM_CB_EVT_PUTC, (f_platform_evt_cb)cb_putc,</span>
<span id="cb76-10"><a href="api-ref.html#cb76-10"></a>                          NULL);</span></code></pre></div>
</div>
</div>
<div id="platform_set_irq_callback" class="section level2">
<h2><span class="header-section-number">6.16</span> <code>platform_set_irq_callback</code></h2>
<p>为中断请求设置回调函数。</p>
<p>开发者不需要定义 IRQ 处理函数，而是通过设置回调实现。两种芯片系列的中断请求总结于表
<a href="api-ref.html#tab:ch4-irq-summary-918">6.1</a>
和表 <a href="api-ref.html#tab:ch4-irq-summary-916">6.2</a>。</p>
<table>
<caption><span id="tab:ch4-irq-summary-918">Table 6.1: </span> ING918xx IRQ 总结</caption>
<thead>
<tr class="header">
<th align="center">外设类型</th>
<th align="center">数量</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">RTC</td>
<td align="center">1</td>
<td align="left">Real Time Clock</td>
</tr>
<tr class="even">
<td align="center">TIMER</td>
<td align="center">3</td>
<td align="left">Timer</td>
</tr>
<tr class="odd">
<td align="center">GPIO</td>
<td align="center">1</td>
<td align="left">General Purpose Input/Output</td>
</tr>
<tr class="even">
<td align="center">SPI</td>
<td align="center">2</td>
<td align="left">Serial Peripheral Interface</td>
</tr>
<tr class="odd">
<td align="center">UART</td>
<td align="center">2</td>
<td align="left">Universal Asynchronous Receiver-Transmitter</td>
</tr>
<tr class="even">
<td align="center">I2C</td>
<td align="center">2</td>
<td align="left">Inter-Integrated Circuit</td>
</tr>
</tbody>
</table>
<table>
<caption><span id="tab:ch4-irq-summary-916">Table 6.2: </span> ING916xx IRQ 总结</caption>
<thead>
<tr class="header">
<th align="center">外设类型</th>
<th align="center">数量</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">RTC</td>
<td align="center">1</td>
<td align="left">Real Time Clock</td>
</tr>
<tr class="even">
<td align="center">GPIO</td>
<td align="center">2</td>
<td align="left">General Purpose Input/Output</td>
</tr>
<tr class="odd">
<td align="center">TIMER</td>
<td align="center">3</td>
<td align="left">Timer</td>
</tr>
<tr class="even">
<td align="center">WDT</td>
<td align="center">1</td>
<td align="left">Watch dog</td>
</tr>
<tr class="odd">
<td align="center">PDM</td>
<td align="center">1</td>
<td align="left">Pulse Density Modulation</td>
</tr>
<tr class="even">
<td align="center">APBSPI</td>
<td align="center">1</td>
<td align="left">Serial Peripheral Interface on APB</td>
</tr>
<tr class="odd">
<td align="center">QSPI</td>
<td align="center">1</td>
<td align="left">Quad serial peripheral interface</td>
</tr>
<tr class="even">
<td align="center">I2S</td>
<td align="center">1</td>
<td align="left">Inter-IC Sound</td>
</tr>
<tr class="odd">
<td align="center">UART</td>
<td align="center">2</td>
<td align="left">Universal Asynchronous Receiver-Transmitter</td>
</tr>
<tr class="even">
<td align="center">I2C</td>
<td align="center">2</td>
<td align="left">Inter-Integrated Circuit</td>
</tr>
<tr class="odd">
<td align="center">DMA</td>
<td align="center">1</td>
<td align="left">Direct Memory Access</td>
</tr>
<tr class="even">
<td align="center">KEYSCAN</td>
<td align="center">1</td>
<td align="left">Key Scanner</td>
</tr>
<tr class="odd">
<td align="center">PWM</td>
<td align="center">1</td>
<td align="left">Pulse Width Modulation</td>
</tr>
<tr class="even">
<td align="center">IR INT</td>
<td align="center">1</td>
<td align="left">Infrared Interrupt</td>
</tr>
<tr class="odd">
<td align="center">IR WAKEUP</td>
<td align="center">1</td>
<td align="left">Infrared Wake-up Interrupt</td>
</tr>
<tr class="even">
<td align="center">USB</td>
<td align="center">1</td>
<td align="left">Universal Serial Bus</td>
</tr>
</tbody>
</table>
<div id="原型-15" class="section level3">
<h3><span class="header-section-number">6.16.1</span> 原型</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="api-ref.html#cb77-1"></a><span class="dt">void</span> platform_set_irq_callback(platform_irq_callback_type_t type,</span>
<span id="cb77-2"><a href="api-ref.html#cb77-2"></a>                               f_platform_irq_cb f,</span>
<span id="cb77-3"><a href="api-ref.html#cb77-3"></a>                               <span class="dt">void</span> *user_data);</span></code></pre></div>
</div>
<div id="参数表-15" class="section level3">
<h3><span class="header-section-number">6.16.2</span> 参数表</h3>
<ul>
<li><p><code>platform_irq_callback_type_t type</code></p>
<p>中断类型。</p>
<ul>
<li><p>对于 ING918xx，中断类型如下：</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="api-ref.html#cb78-1"></a>PLATFORM_CB_IRQ_RTC,</span>
<span id="cb78-2"><a href="api-ref.html#cb78-2"></a>PLATFORM_CB_IRQ_TIMER0,</span>
<span id="cb78-3"><a href="api-ref.html#cb78-3"></a>PLATFORM_CB_IRQ_TIMER1,</span>
<span id="cb78-4"><a href="api-ref.html#cb78-4"></a>PLATFORM_CB_IRQ_TIMER2,</span>
<span id="cb78-5"><a href="api-ref.html#cb78-5"></a>PLATFORM_CB_IRQ_GPIO,</span>
<span id="cb78-6"><a href="api-ref.html#cb78-6"></a>PLATFORM_CB_IRQ_SPI0,</span>
<span id="cb78-7"><a href="api-ref.html#cb78-7"></a>PLATFORM_CB_IRQ_SPI1,</span>
<span id="cb78-8"><a href="api-ref.html#cb78-8"></a>PLATFORM_CB_IRQ_UART0,</span>
<span id="cb78-9"><a href="api-ref.html#cb78-9"></a>PLATFORM_CB_IRQ_UART1,</span>
<span id="cb78-10"><a href="api-ref.html#cb78-10"></a>PLATFORM_CB_IRQ_I2C0,</span>
<span id="cb78-11"><a href="api-ref.html#cb78-11"></a>PLATFORM_CB_IRQ_I2C1</span></code></pre></div></li>
<li><p>对于 ING916xx，中断类型如下：</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="api-ref.html#cb79-1"></a>PLATFORM_CB_IRQ_RTC,</span>
<span id="cb79-2"><a href="api-ref.html#cb79-2"></a>PLATFORM_CB_IRQ_GPIO0,</span>
<span id="cb79-3"><a href="api-ref.html#cb79-3"></a>PLATFORM_CB_IRQ_GPIO1,</span>
<span id="cb79-4"><a href="api-ref.html#cb79-4"></a>PLATFORM_CB_IRQ_TIMER0,</span>
<span id="cb79-5"><a href="api-ref.html#cb79-5"></a>PLATFORM_CB_IRQ_TIMER1,</span>
<span id="cb79-6"><a href="api-ref.html#cb79-6"></a>PLATFORM_CB_IRQ_TIMER2,</span>
<span id="cb79-7"><a href="api-ref.html#cb79-7"></a>PLATFORM_CB_IRQ_WDT,</span>
<span id="cb79-8"><a href="api-ref.html#cb79-8"></a>PLATFORM_CB_IRQ_PDM,</span>
<span id="cb79-9"><a href="api-ref.html#cb79-9"></a>PLATFORM_CB_IRQ_APBSPI,</span>
<span id="cb79-10"><a href="api-ref.html#cb79-10"></a>PLATFORM_CB_IRQ_QSPI,</span>
<span id="cb79-11"><a href="api-ref.html#cb79-11"></a>PLATFORM_CB_IRQ_SADC,</span>
<span id="cb79-12"><a href="api-ref.html#cb79-12"></a>PLATFORM_CB_IRQ_I2S,</span>
<span id="cb79-13"><a href="api-ref.html#cb79-13"></a>PLATFORM_CB_IRQ_UART0,</span>
<span id="cb79-14"><a href="api-ref.html#cb79-14"></a>PLATFORM_CB_IRQ_UART1,</span>
<span id="cb79-15"><a href="api-ref.html#cb79-15"></a>PLATFORM_CB_IRQ_I2C0,</span>
<span id="cb79-16"><a href="api-ref.html#cb79-16"></a>PLATFORM_CB_IRQ_I2C1,</span>
<span id="cb79-17"><a href="api-ref.html#cb79-17"></a>PLATFORM_CB_IRQ_DMA,</span>
<span id="cb79-18"><a href="api-ref.html#cb79-18"></a>PLATFORM_CB_IRQ_KEYSCAN,</span>
<span id="cb79-19"><a href="api-ref.html#cb79-19"></a>PLATFORM_CB_IRQ_PWM,</span>
<span id="cb79-20"><a href="api-ref.html#cb79-20"></a>PLATFORM_CB_IRQ_IR_INT,</span>
<span id="cb79-21"><a href="api-ref.html#cb79-21"></a>PLATFORM_CB_IRQ_IR_WAKEUP,</span>
<span id="cb79-22"><a href="api-ref.html#cb79-22"></a>PLATFORM_CB_IRQ_IR_USB,</span></code></pre></div></li>
</ul></li>
<li><p><code>f_platform_irq_cb f</code></p>
<p>注册到中断 <code>type</code> 的回调函数。 <code>f_platform_irq_cb</code> 的类型为：</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="api-ref.html#cb80-1"></a><span class="kw">typedef</span> <span class="dt">uint32_t</span> (*f_platform_irq_cb)(<span class="dt">void</span> *user_data);</span></code></pre></div></li>
<li><p><code>void *user_data</code></p>
<p>这个参数将原封不动地作为 <code>user_data</code> 传递给回调函数。</p></li>
</ul>
</div>
<div id="返回值-15" class="section level3">
<h3><span class="header-section-number">6.16.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-15" class="section level3">
<h3><span class="header-section-number">6.16.4</span> 备注</h3>
<p>当为中断配置了回调函数后，对应的 IRQ 自动使能。</p>
</div>
<div id="示例-15" class="section level3">
<h3><span class="header-section-number">6.16.5</span> 示例</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="api-ref.html#cb81-1"></a><span class="dt">uint32_t</span> cb_irq_uart0(<span class="dt">void</span> *dummy)</span>
<span id="cb81-2"><a href="api-ref.html#cb81-2"></a>{</span>
<span id="cb81-3"><a href="api-ref.html#cb81-3"></a>    <span class="co">// </span><span class="al">TODO</span><span class="co">: add UART0 IRQ handling code</span></span>
<span id="cb81-4"><a href="api-ref.html#cb81-4"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb81-5"><a href="api-ref.html#cb81-5"></a>}</span>
<span id="cb81-6"><a href="api-ref.html#cb81-6"></a></span>
<span id="cb81-7"><a href="api-ref.html#cb81-7"></a>......</span>
<span id="cb81-8"><a href="api-ref.html#cb81-8"></a></span>
<span id="cb81-9"><a href="api-ref.html#cb81-9"></a>platform_set_irq_callback(PLATFORM_CB_IRQ_UART0, cb_irq_uart0,</span>
<span id="cb81-10"><a href="api-ref.html#cb81-10"></a>                          NULL);</span></code></pre></div>
</div>
</div>
<div id="platform_shutdown" class="section level2">
<h2><span class="header-section-number">6.17</span> <code>platform_shutdown</code></h2>
<p>将整个系统（SoC）置于关机状态，并在一段指定时间后重新启动。可选地，
可以指定保持一段内存，重启之后，app 可继续使用其中的数据。</p>
<p>需要注意这个函数不会返回，除非无法进入关机状态。可能导致无法进入关机状态的原因有：</p>
<ol style="list-style-type: decimal">
<li>外部唤醒信号有效；</li>
<li>输入参数有误；</li>
<li>内部设备正忙。</li>
</ol>
<div id="原型-16" class="section level3">
<h3><span class="header-section-number">6.17.1</span> 原型</h3>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="api-ref.html#cb82-1"></a><span class="dt">void</span> platform_shutdown(<span class="dt">const</span> <span class="dt">uint32_t</span> duration_cycles,</span>
<span id="cb82-2"><a href="api-ref.html#cb82-2"></a>                       <span class="dt">const</span> <span class="dt">void</span> *p_retention_data,</span>
<span id="cb82-3"><a href="api-ref.html#cb82-3"></a>                       <span class="dt">const</span> <span class="dt">uint32_t</span> data_size);</span></code></pre></div>
</div>
<div id="参数表-16" class="section level3">
<h3><span class="header-section-number">6.17.2</span> 参数表</h3>
<ul>
<li><p><code>const uint32_t duration_cycles</code></p>
<p>关机状态的持续时间（以 32k 时钟周期数表示），超时后重启。
最小时间为 825 个周期（大约 25.18ms）。如果该参数为 <code>0</code>，则系统将一直保持关机状态，直到出现外部唤醒信号。</p></li>
<li><p><code>const void *p_retention_data</code></p>
<p>指向需要保持的内存数据的地址。只有 SYSTEM 内存区域允许保持（ING918xx）。
当 <code>data_size</code> 为 <code>0</code> 时，该参考可以为 <code>NULL</code>。</p></li>
<li><p><code>data_size</code></p>
<p>需要保持的内存数据的长度。如果不需要保存数据，将此参数设为 <code>0</code>。</p></li>
</ul>
</div>
<div id="返回值-16" class="section level3">
<h3><span class="header-section-number">6.17.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-16" class="section level3">
<h3><span class="header-section-number">6.17.4</span> 备注</h3>
<p>无。</p>
</div>
<div id="示例-16" class="section level3">
<h3><span class="header-section-number">6.17.5</span> 示例</h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="api-ref.html#cb83-1"></a><span class="co">// 关闭系统，1s 之后重启</span></span>
<span id="cb83-2"><a href="api-ref.html#cb83-2"></a>platform_shutdown(<span class="dv">32768</span>, NULL, <span class="dv">0</span>);</span></code></pre></div>
</div>
</div>
<div id="api-switch-app" class="section level2">
<h2><span class="header-section-number">6.18</span> <code>platform_switch_app</code></h2>
<p>切换到辅 app。</p>
<div id="原型-17" class="section level3">
<h3><span class="header-section-number">6.18.1</span> 原型</h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="api-ref.html#cb84-1"></a><span class="dt">void</span> platform_switch_app(<span class="dt">const</span> <span class="dt">uint32_t</span> app_addr);</span></code></pre></div>
</div>
<div id="参数表-17" class="section level3">
<h3><span class="header-section-number">6.18.2</span> 参数表</h3>
<ul>
<li><p><code>const uint32_t app_addr</code></p>
<p>辅 app 的入口地址。</p></li>
</ul>
</div>
<div id="返回值-17" class="section level3">
<h3><span class="header-section-number">6.18.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-17" class="section level3">
<h3><span class="header-section-number">6.18.4</span> 备注</h3>
<p>本函数之后的代码不会被执行。</p>
</div>
<div id="示例-17" class="section level3">
<h3><span class="header-section-number">6.18.5</span> 示例</h3>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="api-ref.html#cb85-1"></a>platform_switch_app(<span class="bn">0x80000</span>);</span></code></pre></div>
</div>
</div>
<div id="platform_write_persistent_reg" class="section level2">
<h2><span class="header-section-number">6.19</span> <code>platform_write_persistent_reg</code></h2>
<p>将值写入持久化寄存器。这个值在省电、关机、辅app切换等过程或者状态下都保持不变。</p>
<div id="原型-18" class="section level3">
<h3><span class="header-section-number">6.19.1</span> 原型</h3>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="api-ref.html#cb86-1"></a><span class="dt">void</span> platform_write_persistent_reg(<span class="dt">const</span> <span class="dt">uint8_t</span> value);</span></code></pre></div>
</div>
<div id="参数表-18" class="section level3">
<h3><span class="header-section-number">6.19.2</span> 参数表</h3>
<ul>
<li><p><code>const uint8_t value</code></p>
<p>值。</p></li>
</ul>
</div>
<div id="返回值-18" class="section level3">
<h3><span class="header-section-number">6.19.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-18" class="section level3">
<h3><span class="header-section-number">6.19.4</span> 备注</h3>
<p>只会保存 <strong>4</strong> 个比特。</p>
</div>
<div id="示例-18" class="section level3">
<h3><span class="header-section-number">6.19.5</span> 示例</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="api-ref.html#cb87-1"></a>platform_write_persistent_reg(<span class="dv">1</span>);</span></code></pre></div>
</div>
</div>
<div id="syssetpublicdeviceaddr" class="section level2">
<h2><span class="header-section-number">6.20</span> <code>sysSetPublicDeviceAddr</code></h2>
<p>设置设备的公共地址（public address）.</p>
<p>BLE 设备的公共地址是 48 比特的唯一标识（EUI-48），遵照 IEEE 802-2014 standard<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a> 创建。</p>

<div class="rmdcaution">
<em>INGCHIPS</em> 918xx/916xx <em>不</em> 具备公共地址。
本函数 <em>仅</em> 用于调试和测试，<em>绝不可</em> 用于最终产品。
</div>

<div id="原型-19" class="section level3">
<h3><span class="header-section-number">6.20.1</span> 原型</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="api-ref.html#cb88-1"></a><span class="dt">void</span> sysSetPublicDeviceAddr(<span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> *addr);</span></code></pre></div>
</div>
<div id="参数表-19" class="section level3">
<h3><span class="header-section-number">6.20.2</span> 参数表</h3>
<ul>
<li><p><code>const unsigned char *addr</code></p>
<p>新的公共地址。</p></li>
</ul>
</div>
<div id="返回值-19" class="section level3">
<h3><span class="header-section-number">6.20.3</span> 返回值</h3>
<p>无。</p>
</div>
<div id="备注-19" class="section level3">
<h3><span class="header-section-number">6.20.4</span> 备注</h3>
<p>为了避免产生问题，本函数应该先于任何 GAP 函数调用。建议在 <code>app_main</code> 或者 <code>PLATFORM_CB_EVT_PROFILE_INIT</code>
事件的回调里使用。</p>
</div>
<div id="示例-19" class="section level3">
<h3><span class="header-section-number">6.20.5</span> 示例</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="api-ref.html#cb89-1"></a><span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> pub_addr[] = {<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>};</span>
<span id="cb89-2"><a href="api-ref.html#cb89-2"></a>sysSetPublicDeviceAddr(pub_addr);</span></code></pre></div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="19">
<li id="fn19"><p><a href="http://standards.ieee.org/findstds/standard/802-2014.html" class="uri">http://standards.ieee.org/findstds/standard/802-2014.html</a><a href="api-ref.html#fnref19" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dive-into-sdk.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="revision-history.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["user_guide.pdf", "user_guide.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
